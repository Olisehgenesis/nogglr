"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@walletconnect+universal-provider@2.22.4_@react-native-async-storage+async-storage@2.2._5dd727ea2623fa355027986e37232b45";
exports.ids = ["vendor-chunks/@walletconnect+universal-provider@2.22.4_@react-native-async-storage+async-storage@2.2._5dd727ea2623fa355027986e37232b45"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@walletconnect+universal-provider@2.22.4_@react-native-async-storage+async-storage@2.2._5dd727ea2623fa355027986e37232b45/node_modules/@walletconnect/universal-provider/dist/index.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@walletconnect+universal-provider@2.22.4_@react-native-async-storage+async-storage@2.2._5dd727ea2623fa355027986e37232b45/node_modules/@walletconnect/universal-provider/dist/index.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UniversalProvider: () => (/* binding */ ns),\n/* harmony export */   \"default\": () => (/* binding */ N)\n/* harmony export */ });\n/* harmony import */ var _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @walletconnect/sign-client */ \"(ssr)/./node_modules/.pnpm/@walletconnect+sign-client@2.22.4_@react-native-async-storage+async-storage@2.2.0_react_828eb8bb21dbd2be47b0f4f138f48cce/node_modules/@walletconnect/sign-client/dist/index.js\");\n/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+utils@2.22.4_@react-native-async-storage+async-storage@2.2.0_react-nativ_e826be51d69cfd9b27c584ead6cffe20/node_modules/@walletconnect/utils/dist/index.js\");\n/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ \"(ssr)/./node_modules/.pnpm/@walletconnect+jsonrpc-utils@1.0.8/node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js\");\n/* harmony import */ var _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/jsonrpc-provider */ \"(ssr)/./node_modules/.pnpm/@walletconnect+jsonrpc-provider@1.0.14/node_modules/@walletconnect/jsonrpc-provider/dist/index.es.js\");\n/* harmony import */ var _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/jsonrpc-http-connection */ \"(ssr)/./node_modules/.pnpm/@walletconnect+jsonrpc-http-connection@1.0.8/node_modules/@walletconnect/jsonrpc-http-connection/dist/index.es.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! events */ \"events\");\nfunction _(t){return t==null||typeof t!=\"object\"&&typeof t!=\"function\"}function Z(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function T(t){return t==null?t===void 0?\"[object Undefined]\":\"[object Null]\":Object.prototype.toString.call(t)}const Fe=\"[object RegExp]\",ee=\"[object String]\",te=\"[object Number]\",se=\"[object Boolean]\",ie=\"[object Arguments]\",He=\"[object Symbol]\",Ue=\"[object Date]\",Be=\"[object Map]\",Le=\"[object Set]\",Me=\"[object Array]\",ze=\"[object ArrayBuffer]\",Ge=\"[object Object]\",We=\"[object DataView]\",Je=\"[object Uint8Array]\",Ke=\"[object Uint8ClampedArray]\",Ve=\"[object Uint16Array]\",Ye=\"[object Uint32Array]\",Xe=\"[object Int8Array]\",ke=\"[object Int16Array]\",Qe=\"[object Int32Array]\",Ze=\"[object Float32Array]\",Te=\"[object Float64Array]\";function x(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function et(t,e){return y(t,void 0,t,new Map,e)}function y(t,e,s,i=new Map,r=void 0){const a=r?.(t,e,s,i);if(a!=null)return a;if(_(t))return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){const n=new Array(t.length);i.set(t,n);for(let c=0;c<t.length;c++)n[c]=y(t[c],c,s,i,r);return Object.hasOwn(t,\"index\")&&(n.index=t.index),Object.hasOwn(t,\"input\")&&(n.input=t.input),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const n=new RegExp(t.source,t.flags);return n.lastIndex=t.lastIndex,n}if(t instanceof Map){const n=new Map;i.set(t,n);for(const[c,o]of t)n.set(c,y(o,c,s,i,r));return n}if(t instanceof Set){const n=new Set;i.set(t,n);for(const c of t)n.add(y(c,void 0,s,i,r));return n}if(typeof Buffer<\"u\"&&Buffer.isBuffer(t))return t.subarray();if(x(t)){const n=new(Object.getPrototypeOf(t)).constructor(t.length);i.set(t,n);for(let c=0;c<t.length;c++)n[c]=y(t[c],c,s,i,r);return n}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<\"u\"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const n=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return i.set(t,n),m(n,t,s,i,r),n}if(typeof File<\"u\"&&t instanceof File){const n=new File([t],t.name,{type:t.type});return i.set(t,n),m(n,t,s,i,r),n}if(t instanceof Blob){const n=new Blob([t],{type:t.type});return i.set(t,n),m(n,t,s,i,r),n}if(t instanceof Error){const n=new t.constructor;return i.set(t,n),n.message=t.message,n.name=t.name,n.stack=t.stack,n.cause=t.cause,m(n,t,s,i,r),n}if(typeof t==\"object\"&&tt(t)){const n=Object.create(Object.getPrototypeOf(t));return i.set(t,n),m(n,t,s,i,r),n}return t}function m(t,e,s=t,i,r){const a=[...Object.keys(e),...Z(e)];for(let n=0;n<a.length;n++){const c=a[n],o=Object.getOwnPropertyDescriptor(t,c);(o==null||o.writable)&&(t[c]=y(e[c],c,s,i,r))}}function tt(t){switch(T(t)){case ie:case Me:case ze:case We:case se:case Ue:case Ze:case Te:case Xe:case ke:case Qe:case Be:case te:case Ge:case Fe:case Le:case ee:case He:case Je:case Ke:case Ve:case Ye:return!0;default:return!1}}function st(t,e){return et(t,(s,i,r,a)=>{const n=e?.(s,i,r,a);if(n!=null)return n;if(typeof t==\"object\")switch(Object.prototype.toString.call(t)){case te:case ee:case se:{const c=new t.constructor(t?.valueOf());return m(c,t),c}case ie:{const c={};return m(c,t),c.length=t.length,c[Symbol.iterator]=t[Symbol.iterator],c}default:return}})}function ne(t){return st(t)}function re(t){return t!==null&&typeof t==\"object\"&&T(t)===\"[object Arguments]\"}function ae(t){return typeof t==\"object\"&&t!==null}function it(){}function nt(t){return x(t)}function rt(t){if(typeof t!=\"object\"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!==\"[object Object]\"){const s=t[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${s}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function at(t){if(_(t))return t;if(Array.isArray(t)||x(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<\"u\"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),s=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new s(t);if(t instanceof RegExp){const i=new s(t);return i.lastIndex=t.lastIndex,i}if(t instanceof DataView)return new s(t.buffer.slice(0));if(t instanceof Error){const i=new s(t.message);return i.stack=t.stack,i.name=t.name,i.cause=t.cause,i}if(typeof File<\"u\"&&t instanceof File)return new s([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t==\"object\"){const i=Object.create(e);return Object.assign(i,t)}return t}function ct(t,...e){const s=e.slice(0,-1),i=e[e.length-1];let r=t;for(let a=0;a<s.length;a++){const n=s[a];r=$(r,n,i,new Map)}return r}function $(t,e,s,i){if(_(t)&&(t=Object(t)),e==null||typeof e!=\"object\")return t;if(i.has(e))return at(i.get(e));if(i.set(e,t),Array.isArray(e)){e=e.slice();for(let a=0;a<e.length;a++)e[a]=e[a]??void 0}const r=[...Object.keys(e),...Z(e)];for(let a=0;a<r.length;a++){const n=r[a];let c=e[n],o=t[n];if(re(c)&&(c={...c}),re(o)&&(o={...o}),typeof Buffer<\"u\"&&Buffer.isBuffer(c)&&(c=ne(c)),Array.isArray(c))if(typeof o==\"object\"&&o!=null){const l=[],p=Reflect.ownKeys(o);for(let f=0;f<p.length;f++){const u=p[f];l[u]=o[u]}o=l}else o=[];const h=s(o,c,n,t,e,i);h!=null?t[n]=h:Array.isArray(c)||ae(o)&&ae(c)?t[n]=$(o,c,s,i):o==null&&rt(c)?t[n]=$({},c,s,i):o==null&&nt(c)?t[n]=ne(c):(o===void 0||c!==void 0)&&(t[n]=c)}return t}function ot(t,...e){return ct(t,...e,it)}const ce=\"error\",pt=\"wss://relay.walletconnect.org\",ht=\"wc\",oe=\"universal_provider\",A=`${ht}@2:${oe}:`,pe=\"https://rpc.walletconnect.org/v1/\",he=\"generic\",lt=`${pe}bundler`,v=\"call_status\",ut=86400,F={DEFAULT_CHAIN_CHANGED:\"default_chain_changed\"};var dt=Object.defineProperty,ft=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,ue=(t,e,s)=>e in t?dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,E=(t,e)=>{for(var s in e||(e={}))gt.call(e,s)&&ue(t,s,e[s]);if(le)for(var s of le(e))yt.call(e,s)&&ue(t,s,e[s]);return t},vt=(t,e)=>ft(t,mt(e));function de(t,e,s){var i;const r=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseChainId)(t);return((i=e.rpcMap)==null?void 0:i[r.reference])||`${pe}?chainId=${r.namespace}:${r.reference}&projectId=${s}`}function wt(t){return t.includes(\":\")?t.split(\":\")[1]:t}function fe(t){return t.map(e=>`${e.split(\":\")[0]}:${e.split(\":\")[1]}`)}function bt(t,e){const s=Object.keys(e.namespaces).filter(r=>r.includes(t));if(!s.length)return[];const i=[];return s.forEach(r=>{const a=e.namespaces[r].accounts;i.push(...a)}),i}function me(t){return Object.fromEntries(Object.entries(t).filter(([e,s])=>{var i,r;return((i=s?.chains)==null?void 0:i.length)&&((r=s?.chains)==null?void 0:r.length)>0}))}function C(t={},e={}){const s=me(ge(t)),i=me(ge(e));return ot(s,i)}function ge(t){var e,s,i,r,a;const n={};if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(t))return n;for(const[c,o]of Object.entries(t)){const h=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isCaipNamespace)(c)?[c]:o.chains,l=o.methods||[],p=o.events||[],f=o.rpcMap||{},u=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseNamespaceKey)(c);n[u]=vt(E(E({},n[u]),o),{chains:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.mergeArrays)(h,(e=n[u])==null?void 0:e.chains),methods:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.mergeArrays)(l,(s=n[u])==null?void 0:s.methods),events:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.mergeArrays)(p,(i=n[u])==null?void 0:i.events)}),((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(f)||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(((r=n[u])==null?void 0:r.rpcMap)||{}))&&(n[u].rpcMap=E(E({},f),(a=n[u])==null?void 0:a.rpcMap))}return n}function ye(t){return t.includes(\":\")?t.split(\":\")[2]:t}function ve(t){const e={};for(const[s,i]of Object.entries(t)){const r=i.methods||[],a=i.events||[],n=i.accounts||[],c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isCaipNamespace)(s)?[s]:i.chains?i.chains:fe(i.accounts);e[s]={chains:c,methods:r,events:a,accounts:n}}return e}function H(t){return typeof t==\"number\"?t:t.includes(\"0x\")?parseInt(t,16):(t=t.includes(\":\")?t.split(\":\")[1]:t,isNaN(Number(t))?t:Number(t))}function Pt(t){try{const e=JSON.parse(t);return typeof e==\"object\"&&e!==null&&!Array.isArray(e)}catch{return!1}}const we={},w=t=>we[t],U=(t,e)=>{we[t]=e};var Ot=Object.defineProperty,be=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,Pe=(t,e,s)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Oe=(t,e)=>{for(var s in e||(e={}))It.call(e,s)&&Pe(t,s,e[s]);if(be)for(var s of be(e))St.call(e,s)&&Pe(t,s,e[s]);return t};const Ie=\"eip155\",$t=[\"atomic\",\"flow-control\",\"paymasterService\",\"sessionKeys\",\"auxiliaryFunds\"],At=t=>t&&t.startsWith(\"0x\")?BigInt(t).toString(10):t,B=t=>t&&t.startsWith(\"0x\")?t:`0x${BigInt(t).toString(16)}`,Se=t=>Object.keys(t).filter(e=>$t.includes(e)).reduce((e,s)=>(e[s]=Et(t[s]),e),{}),Et=t=>typeof t==\"string\"&&Pt(t)?JSON.parse(t):t,Ct=(t,e,s)=>{const{sessionProperties:i={},scopedProperties:r={}}=t,a={};if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(r)&&!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(i))return;const n=Se(i);for(const c of s){const o=At(c);if(!o)continue;a[B(o)]=n;const h=r?.[`${Ie}:${o}`];if(h){const l=h?.[`${Ie}:${o}:${e}`];a[B(o)]=Oe(Oe({},a[B(o)]),Se(l||h))}}for(const[c,o]of Object.entries(a))Object.keys(o).length===0&&delete a[c];return Object.keys(a).length>0?a:void 0};var jt=Object.defineProperty,Nt=(t,e,s)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,qt=(t,e,s)=>Nt(t,typeof e!=\"symbol\"?e+\"\":e,s);let L;class J{constructor(e){qt(this,\"storage\"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,s){return await this.storage.setItem(e,s)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return L||(L=new J(e)),L}}var Dt=Object.defineProperty,Rt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable,Ae=(t,e,s)=>e in t?Dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,Ht=(t,e)=>{for(var s in e||(e={}))xt.call(e,s)&&Ae(t,s,e[s]);if($e)for(var s of $e(e))Ft.call(e,s)&&Ae(t,s,e[s]);return t},Ut=(t,e)=>Rt(t,_t(e));async function Bt(t,e){const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseChainId)(t.result.capabilities.caip345.caip2),i=t.result.capabilities.caip345.transactionHashes,r=await Promise.allSettled(i.map(p=>Lt(s.reference,p,e))),a=r.filter(p=>p.status===\"fulfilled\").map(p=>p.value).filter(p=>p);r.filter(p=>p.status===\"rejected\").forEach(p=>console.warn(\"Failed to fetch transaction receipt:\",p.reason));const n=!a.length||a.some(p=>!p),c=a.every(p=>p?.status===\"0x1\"),o=a.every(p=>p?.status===\"0x0\"),h=a.some(p=>p?.status===\"0x0\");let l;return n?l=100:c?l=200:o?l=500:h&&(l=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:a,status:l}}async function Lt(t,e,s){return await s(parseInt(t)).request((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_0__.formatJsonRpcRequest)(\"eth_getTransactionReceipt\",[e]))}async function Mt({sendCalls:t,storage:e}){const s=await e.getItem(v);await e.setItem(v,Ut(Ht({},s),{[t.result.id]:{request:t.request,result:t.result,expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(ut)}}))}async function zt({resultId:t,storage:e}){const s=await e.getItem(v);if(s){delete s[t],await e.setItem(v,s);for(const i in s)(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(s[i].expiry)&&delete s[i];await e.setItem(v,s)}}async function Gt({resultId:t,storage:e}){const s=await e.getItem(v),i=s?.[t];if(i&&!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(i.expiry))return i;await zt({resultId:t,storage:e})}var Wt=Object.defineProperty,Jt=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,M=(t,e,s)=>e in t?Wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,z=(t,e)=>{for(var s in e||(e={}))Vt.call(e,s)&&M(t,s,e[s]);if(Ee)for(var s of Ee(e))Yt.call(e,s)&&M(t,s,e[s]);return t},G=(t,e)=>Jt(t,Kt(e)),g=(t,e,s)=>M(t,typeof e!=\"symbol\"?e+\"\":e,s);class Xt{constructor(e){g(this,\"name\",\"eip155\"),g(this,\"client\"),g(this,\"chainId\"),g(this,\"namespace\"),g(this,\"httpProviders\"),g(this,\"events\"),g(this,\"storage\"),this.namespace=e.namespace,this.events=w(\"events\"),this.client=w(\"client\"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=J.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case\"eth_requestAccounts\":return this.getAccounts();case\"eth_accounts\":return this.getAccounts();case\"wallet_switchEthereumChain\":return await this.handleSwitchChain(e);case\"eth_chainId\":return parseInt(this.getDefaultChain());case\"wallet_getCapabilities\":return await this.getCapabilities(e);case\"wallet_getCallsStatus\":return await this.getCallStatus(e);case\"wallet_sendCalls\":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,s){this.httpProviders[e]||this.setHttpProvider(parseInt(e),s);const i=this.chainId;this.chainId=parseInt(e),this.events.emit(F.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${i}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}createHttpProvider(e,s){const i=s||de(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_1__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_2__.HttpConnection(i,w(\"disableProviderPing\")))}setHttpProvider(e,s){const i=this.createHttpProvider(e,s);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(s=>{var i;const r=parseInt(wt(s));e[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[s])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(s=>s.split(\":\")[1]===this.chainId.toString()).map(s=>s.split(\":\")[2]))]:[]}getHttpProvider(e){const s=e||this.chainId;return this.httpProviders[s]||(this.httpProviders=G(z({},this.httpProviders),{[s]:this.createHttpProvider(s)}),this.httpProviders[s])}async handleSwitchChain(e){var s,i;let r=e.request.params?(s=e.request.params[0])==null?void 0:s.chainId:\"0x0\";r=r.startsWith(\"0x\")?r:`0x${r}`;const a=parseInt(r,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes(\"wallet_switchEthereumChain\"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:r}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var s,i,r,a,n;const c=(i=(s=e.request)==null?void 0:s.params)==null?void 0:i[0],o=((a=(r=e.request)==null?void 0:r.params)==null?void 0:a[1])||[];if(!c)throw new Error(\"Missing address parameter in `wallet_getCapabilities` request\");const h=this.client.session.get(e.topic),l=((n=h?.sessionProperties)==null?void 0:n.capabilities)||{},p=`${c}${o.join(\",\")}`,f=l?.[p];if(f)return f;let u;try{u=Ct(h,c,o)}catch(q){console.warn(\"Failed to extract capabilities from session\",q)}if(u)return u;const K=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:G(z({},h.sessionProperties||{}),{capabilities:G(z({},l||{}),{[p]:K})})})}catch(q){console.warn(\"Failed to update session with capabilities\",q)}return K}async getCallStatus(e){var s,i,r;const a=this.client.session.get(e.topic),n=(s=a.sessionProperties)==null?void 0:s.bundler_name;if(n){const h=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(h,e)}catch(l){console.warn(\"Failed to fetch call status from bundler\",l,h)}}const c=(i=a.sessionProperties)==null?void 0:i.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(h){console.warn(\"Failed to fetch call status from custom bundler\",h,c)}const o=await Gt({resultId:(r=e.request.params)==null?void 0:r[0],storage:this.storage});if(o)try{return await Bt(o,this.getHttpProvider.bind(this))}catch(h){console.warn(\"Failed to fetch call status from stored send calls\",h,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error(\"Fetching call status not approved by the wallet.\")}async getUserOperationReceipt(e,s){var i;const r=new URL(e),a=await fetch(r,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_0__.formatJsonRpcRequest)(\"eth_getUserOperationReceipt\",[(i=s.request.params)==null?void 0:i[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(e,s){return`${lt}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${s}`}async sendCalls(e){var s,i,r;const a=await this.client.request(e),n=(s=e.request.params)==null?void 0:s[0],c=a?.id,o=a?.capabilities||{},h=(i=o?.caip345)==null?void 0:i.caip2,l=(r=o?.caip345)==null?void 0:r.transactionHashes;return!c||!h||!(l!=null&&l.length)||await Mt({sendCalls:{request:n,result:a},storage:this.storage}),a}}var kt=Object.defineProperty,Qt=(t,e,s)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,b=(t,e,s)=>Qt(t,typeof e!=\"symbol\"?e+\"\":e,s);class Zt{constructor(e){b(this,\"name\",he),b(this,\"client\"),b(this,\"httpProviders\"),b(this,\"events\"),b(this,\"namespace\"),b(this,\"chainId\"),this.namespace=e.namespace,this.events=w(\"events\"),this.client=w(\"client\"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,s){this.httpProviders[e]||this.setHttpProvider(e,s);const i=this.chainId;this.chainId=e,this.events.emit(F.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${i}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return e.split(\":\")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error(\"ChainId not found\");return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseChainId)(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(s=>s.split(\":\")[1]===this.chainId.toString()).map(s=>s.split(\":\")[2]))]:[]}createHttpProviders(){var e,s;const i={};return(s=(e=this.namespace)==null?void 0:e.accounts)==null||s.forEach(r=>{var a,n;const c=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseChainId)(r),o=(n=(a=this.namespace)==null?void 0:a.rpcMap)==null?void 0:n[`${c.namespace}:${c.reference}`];i[c.reference]=this.createHttpProvider(r,o)}),i}getHttpProvider(e){const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseChainId)(e).reference,i=this.httpProviders[s];if(typeof i>\"u\")throw new Error(`JSON-RPC provider for ${e} not found`);return i}setHttpProvider(e,s){const i=this.createHttpProvider(e,s);i&&(this.httpProviders[e]=i)}createHttpProvider(e,s){const i=s||de(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_1__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_2__[\"default\"](i,w(\"disableProviderPing\")))}}var Tt=Object.defineProperty,es=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,ss=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,W=(t,e,s)=>e in t?Tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,S=(t,e)=>{for(var s in e||(e={}))ss.call(e,s)&&W(t,s,e[s]);if(Ce)for(var s of Ce(e))is.call(e,s)&&W(t,s,e[s]);return t},j=(t,e)=>es(t,ts(e)),d=(t,e,s)=>W(t,typeof e!=\"symbol\"?e+\"\":e,s);class N{constructor(e){d(this,\"client\"),d(this,\"namespaces\"),d(this,\"optionalNamespaces\"),d(this,\"sessionProperties\"),d(this,\"scopedProperties\"),d(this,\"events\",new events__WEBPACK_IMPORTED_MODULE_3__),d(this,\"rpcProviders\",{}),d(this,\"session\"),d(this,\"providerOpts\"),d(this,\"logger\"),d(this,\"uri\"),d(this,\"disableProviderPing\",!1);var s,i;this.providerOpts=e,this.logger=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createLogger)({logger:(s=e.logger)!=null?s:ce,name:(i=this.providerOpts.name)!=null?i:oe}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const s=new N(e);return await s.initialize(),s}async request(e,s,i){const[r,a]=this.validateChain(s);if(!this.session)throw new Error(\"Please call connect() before request()\");return await this.getProvider(r).request({request:S({},e),chainId:`${r}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(e,s,i,r){const a=new Date().getTime();this.request(e,i,r).then(n=>s(null,(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_0__.formatJsonRpcResult)(a,n))).catch(n=>s(n,void 0))}async enable(){if(!this.client)throw new Error(\"Sign Client not initialized\");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error(\"Please call connect() before enable()\");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)(\"USER_DISCONNECTED\")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error(\"Sign Client not initialized\");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,s){if(!this.client)throw new Error(\"Sign Client not initialized\");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:r}=await this.client.authenticate(e,s);i&&(this.uri=i,this.events.emit(\"display_uri\",i));const a=await r();if(this.session=a.session,this.session){const n=ve(this.session.namespaces);this.namespaces=C(this.namespaces,n),await this.persist(\"namespaces\",this.namespaces),this.onConnect()}return a}on(e,s){this.events.on(e,s)}once(e,s){this.events.once(e,s)}removeListener(e,s){this.events.removeListener(e,s)}off(e,s){this.events.off(e,s)}get isWalletConnect(){return!0}async pair(e){const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});s&&(this.uri=s,this.events.emit(\"display_uri\",s));const r=await i();this.session=r;const a=ve(r.namespaces);return this.namespaces=C(this.namespaces,a),await this.persist(\"namespaces\",this.namespaces),await this.persist(\"optionalNamespaces\",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,s){try{if(!this.session)return;const[i,r]=this.validateChain(e);this.getProvider(i).setDefaultChain(r,s)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){try{this.logger.info(\"Cleaning up inactive pairings...\");const s=this.client.pairing.getAll();if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidArray)(s))return;for(const i of s)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${s.length}`)}catch(s){this.logger.warn(s,\"Failed to cleanup pending pairings\")}}abortPairingAttempt(){this.logger.warn(\"abortPairingAttempt is deprecated. This is now a no-op.\")}async checkStorage(){this.namespaces=await this.getFromStore(\"namespaces\")||{},this.optionalNamespaces=await this.getFromStore(\"optionalNamespaces\")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace(\"Initialized\"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,s;if(this.client=this.providerOpts.client||await _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_5__.SignClient.init({core:this.providerOpts.core,logger:this.providerOpts.logger||ce,relayUrl:this.providerOpts.relayUrl||pt,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(i){throw this.logger.error(i,\"Failed to get session\"),new Error(`The provided session: ${(s=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:s.topic} doesn't exist in the Sign client`)}else{const i=this.client.session.getAll();this.session=i[0]}this.logger.trace(\"SignClient Initialized\")}createProviders(){if(!this.client)throw new Error(\"Sign Client not initialized\");if(!this.session)throw new Error(\"Session not initialized. Please call connect() before enable()\");const e=[...new Set(Object.keys(this.session.namespaces).map(s=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseNamespaceKey)(s)))];U(\"client\",this.client),U(\"events\",this.events),U(\"disableProviderPing\",this.disableProviderPing),e.forEach(s=>{if(!this.session)return;const i=bt(s,this.session);if(i?.length===0)return;const r=fe(i),a=C(this.namespaces,this.optionalNamespaces),n=j(S({},a[s]),{accounts:i,chains:r});switch(s){case\"eip155\":this.rpcProviders[s]=new Xt({namespace:n});break;default:this.rpcProviders[s]=new Zt({namespace:n})}})}registerEventListeners(){if(typeof this.client>\"u\")throw new Error(\"Sign Client is not initialized\");this.client.on(\"session_ping\",e=>{var s;const{topic:i}=e;i===((s=this.session)==null?void 0:s.topic)&&this.events.emit(\"session_ping\",e)}),this.client.on(\"session_event\",e=>{var s;const{params:i,topic:r}=e;if(r!==((s=this.session)==null?void 0:s.topic))return;const{event:a}=i;if(a.name===\"accountsChanged\"){const n=a.data;n&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidArray)(n)&&this.events.emit(\"accountsChanged\",n.map(ye))}else if(a.name===\"chainChanged\"){const n=i.chainId,c=i.event.data,o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseNamespaceKey)(n),h=H(n)!==H(c)?`${o}:${H(c)}`:n;this.onChainChanged({currentCaipChainId:h})}else this.events.emit(a.name,a.data);this.events.emit(\"session_event\",e)}),this.client.on(\"session_update\",({topic:e,params:s})=>{var i,r;if(e!==((i=this.session)==null?void 0:i.topic))return;const{namespaces:a}=s,n=(r=this.client)==null?void 0:r.session.get(e);this.session=j(S({},n),{namespaces:a}),this.onSessionUpdate(),this.events.emit(\"session_update\",{topic:e,params:s})}),this.client.on(\"session_delete\",async e=>{var s;e.topic===((s=this.session)==null?void 0:s.topic)&&(await this.cleanup(),this.events.emit(\"session_delete\",e),this.events.emit(\"disconnect\",j(S({},(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)(\"USER_DISCONNECTED\")),{data:e.topic})))}),this.on(F.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(j(S({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[he]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var s;this.getProvider(e).updateNamespace((s=this.session)==null?void 0:s.namespaces[e])})}setNamespaces(e){const{namespaces:s={},optionalNamespaces:i={},sessionProperties:r,scopedProperties:a}=e;this.optionalNamespaces=C(s,i),this.sessionProperties=r,this.scopedProperties=a}validateChain(e){const[s,i]=e?.split(\":\")||[\"\",\"\"];if(!this.namespaces||!Object.keys(this.namespaces).length)return[s,i];if(s&&!Object.keys(this.namespaces||{}).map(n=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseNamespaceKey)(n)).includes(s))throw new Error(`Namespace '${s}' is not configured. Please call connect() first with namespace config.`);if(s&&i)return[s,i];const r=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseNamespaceKey)(Object.keys(this.namespaces)[0]),a=this.rpcProviders[r].getDefaultChain();return[r,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:s,internal:i=!1}){if(!this.namespaces)return;const[r,a]=this.validateChain(e);a&&(this.updateNamespaceChain(r,a),i?(this.events.emit(\"chainChanged\",a),this.emitAccountsChangedOnChainChange({namespace:r,currentCaipChainId:e,previousCaipChainId:s})):this.getProvider(r).setDefaultChain(a),await this.persist(\"namespaces\",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:s,previousCaipChainId:i}){var r,a;try{if(i===s)return;const n=(a=(r=this.session)==null?void 0:r.namespaces[e])==null?void 0:a.accounts;if(!n)return;const c=n.filter(o=>o.includes(`${s}:`)).map(ye);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidArray)(c))return;this.events.emit(\"accountsChanged\",c)}catch(n){this.logger.warn(n,\"Failed to emit accountsChanged on chain change\")}}updateNamespaceChain(e,s){if(!this.namespaces)return;const i=this.namespaces[e]?e:`${e}:${s}`,r={chains:[],methods:[],events:[],defaultChain:s};this.namespaces[i]?this.namespaces[i]&&(this.namespaces[i].defaultChain=s):this.namespaces[i]=r}onConnect(){this.createProviders(),this.events.emit(\"connect\",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore(\"namespaces\"),await this.deleteFromStore(\"optionalNamespaces\"),await this.deleteFromStore(\"sessionProperties\"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,s){var i;const r=((i=this.session)==null?void 0:i.topic)||\"\";await this.client.core.storage.setItem(`${A}/${e}${r}`,s)}async getFromStore(e){var s;const i=((s=this.session)==null?void 0:s.topic)||\"\";return await this.client.core.storage.getItem(`${A}/${e}${i}`)}async deleteFromStore(e){var s;const i=((s=this.session)==null?void 0:s.topic)||\"\";await this.client.core.storage.removeItem(`${A}/${e}${i}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const s=await this.client.core.storage.getKeys();for(const i of s)i.startsWith(A)&&await this.client.core.storage.removeItem(i)}catch(s){this.logger.warn(s,\"Failed to cleanup storage\")}}}const ns=N;\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdhbGxldGNvbm5lY3QrdW5pdmVyc2FsLXByb3ZpZGVyQDIuMjIuNF9AcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UrYXN5bmMtc3RvcmFnZUAyLjIuXzVkZDcyN2VhMjYyM2ZhMzU1MDI3OTg2ZTM3MjMyYjQ1L25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC91bml2ZXJzYWwtcHJvdmlkZXIvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1aEIsY0FBYyx5REFBeUQsY0FBYyxrR0FBa0csY0FBYyxpR0FBaUcsc2dCQUFzZ0IsY0FBYyx1REFBdUQsaUJBQWlCLCtCQUErQixxQ0FBcUMscUJBQXFCLG9CQUFvQixpQkFBaUIsNEJBQTRCLHFCQUFxQiw0QkFBNEIsV0FBVyxZQUFZLFdBQVcseUJBQXlCLGlHQUFpRyxrREFBa0Qsd0JBQXdCLHFDQUFxQyxpQ0FBaUMscUJBQXFCLGdCQUFnQixXQUFXLHlDQUF5QyxTQUFTLHFCQUFxQixnQkFBZ0IsV0FBVywwQ0FBMEMsU0FBUyw2REFBNkQsU0FBUyw0REFBNEQsV0FBVyxZQUFZLFdBQVcseUJBQXlCLFNBQVMsNEdBQTRHLDBCQUEwQixrRUFBa0UsaUNBQWlDLHVDQUF1Qyw2QkFBNkIsWUFBWSxFQUFFLGlDQUFpQyxzQkFBc0Isc0JBQXNCLFlBQVksRUFBRSxpQ0FBaUMsdUJBQXVCLDBCQUEwQixtR0FBbUcsOEJBQThCLGdEQUFnRCxpQ0FBaUMsU0FBUyx3QkFBd0Isb0NBQW9DLFlBQVksV0FBVyxLQUFLLG9EQUFvRCwrQ0FBK0MsZUFBZSxhQUFhLHlMQUF5TCxrQkFBa0IsaUJBQWlCLHdCQUF3QixxQkFBcUIsb0JBQW9CLGdFQUFnRSx5QkFBeUIsd0NBQXdDLGdCQUFnQixTQUFTLFdBQVcsd0VBQXdFLGdCQUFnQixFQUFFLGVBQWUsYUFBYSxlQUFlLGlFQUFpRSxlQUFlLG9DQUFvQyxlQUFlLGVBQWUsWUFBWSxlQUFlLHdDQUF3Qyw0Q0FB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QUF1QixNQUFNLElBQUksNERBQTRELGlEQUFpRCwrRUFBK0UsU0FBUyxrREFBa0QsV0FBd0Q7QUFDdG83QiIsInNvdXJjZXMiOlsid2VicGFjazovL25vZ2dsci8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ad2FsbGV0Y29ubmVjdCt1bml2ZXJzYWwtcHJvdmlkZXJAMi4yMi40X0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZSthc3luYy1zdG9yYWdlQDIuMi5fNWRkNzI3ZWEyNjIzZmEzNTUwMjc5ODZlMzcyMzJiNDUvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3VuaXZlcnNhbC1wcm92aWRlci9kaXN0L2luZGV4LmpzP2Q0N2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e1NpZ25DbGllbnQgYXMgamV9ZnJvbVwiQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnRcIjtpbXBvcnR7aXNWYWxpZE9iamVjdCBhcyBQLGlzQ2FpcE5hbWVzcGFjZSBhcyBWLHBhcnNlTmFtZXNwYWNlS2V5IGFzIE8sbWVyZ2VBcnJheXMgYXMgRCxwYXJzZUNoYWluSWQgYXMgSSxjYWxjRXhwaXJ5IGFzIE5lLGlzRXhwaXJlZCBhcyBZLGNyZWF0ZUxvZ2dlciBhcyBxZSxnZXRTZGtFcnJvciBhcyBYLGlzVmFsaWRBcnJheSBhcyBSfWZyb21cIkB3YWxsZXRjb25uZWN0L3V0aWxzXCI7aW1wb3J0e2Zvcm1hdEpzb25ScGNSZXF1ZXN0IGFzIGssZm9ybWF0SnNvblJwY1Jlc3VsdCBhcyBEZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC9qc29ucnBjLXV0aWxzXCI7aW1wb3J0e0pzb25ScGNQcm92aWRlciBhcyBRfWZyb21cIkB3YWxsZXRjb25uZWN0L2pzb25ycGMtcHJvdmlkZXJcIjtpbXBvcnQgUmUse0h0dHBDb25uZWN0aW9uIGFzIF9lfWZyb21cIkB3YWxsZXRjb25uZWN0L2pzb25ycGMtaHR0cC1jb25uZWN0aW9uXCI7aW1wb3J0IHhlIGZyb21cImV2ZW50c1wiO2Z1bmN0aW9uIF8odCl7cmV0dXJuIHQ9PW51bGx8fHR5cGVvZiB0IT1cIm9iamVjdFwiJiZ0eXBlb2YgdCE9XCJmdW5jdGlvblwifWZ1bmN0aW9uIFoodCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkuZmlsdGVyKGU9Pk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0LGUpKX1mdW5jdGlvbiBUKHQpe3JldHVybiB0PT1udWxsP3Q9PT12b2lkIDA/XCJbb2JqZWN0IFVuZGVmaW5lZF1cIjpcIltvYmplY3QgTnVsbF1cIjpPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9Y29uc3QgRmU9XCJbb2JqZWN0IFJlZ0V4cF1cIixlZT1cIltvYmplY3QgU3RyaW5nXVwiLHRlPVwiW29iamVjdCBOdW1iZXJdXCIsc2U9XCJbb2JqZWN0IEJvb2xlYW5dXCIsaWU9XCJbb2JqZWN0IEFyZ3VtZW50c11cIixIZT1cIltvYmplY3QgU3ltYm9sXVwiLFVlPVwiW29iamVjdCBEYXRlXVwiLEJlPVwiW29iamVjdCBNYXBdXCIsTGU9XCJbb2JqZWN0IFNldF1cIixNZT1cIltvYmplY3QgQXJyYXldXCIsemU9XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiLEdlPVwiW29iamVjdCBPYmplY3RdXCIsV2U9XCJbb2JqZWN0IERhdGFWaWV3XVwiLEplPVwiW29iamVjdCBVaW50OEFycmF5XVwiLEtlPVwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV1cIixWZT1cIltvYmplY3QgVWludDE2QXJyYXldXCIsWWU9XCJbb2JqZWN0IFVpbnQzMkFycmF5XVwiLFhlPVwiW29iamVjdCBJbnQ4QXJyYXldXCIsa2U9XCJbb2JqZWN0IEludDE2QXJyYXldXCIsUWU9XCJbb2JqZWN0IEludDMyQXJyYXldXCIsWmU9XCJbb2JqZWN0IEZsb2F0MzJBcnJheV1cIixUZT1cIltvYmplY3QgRmxvYXQ2NEFycmF5XVwiO2Z1bmN0aW9uIHgodCl7cmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyh0KSYmISh0IGluc3RhbmNlb2YgRGF0YVZpZXcpfWZ1bmN0aW9uIGV0KHQsZSl7cmV0dXJuIHkodCx2b2lkIDAsdCxuZXcgTWFwLGUpfWZ1bmN0aW9uIHkodCxlLHMsaT1uZXcgTWFwLHI9dm9pZCAwKXtjb25zdCBhPXI/Lih0LGUscyxpKTtpZihhIT1udWxsKXJldHVybiBhO2lmKF8odCkpcmV0dXJuIHQ7aWYoaS5oYXModCkpcmV0dXJuIGkuZ2V0KHQpO2lmKEFycmF5LmlzQXJyYXkodCkpe2NvbnN0IG49bmV3IEFycmF5KHQubGVuZ3RoKTtpLnNldCh0LG4pO2ZvcihsZXQgYz0wO2M8dC5sZW5ndGg7YysrKW5bY109eSh0W2NdLGMscyxpLHIpO3JldHVybiBPYmplY3QuaGFzT3duKHQsXCJpbmRleFwiKSYmKG4uaW5kZXg9dC5pbmRleCksT2JqZWN0Lmhhc093bih0LFwiaW5wdXRcIikmJihuLmlucHV0PXQuaW5wdXQpLG59aWYodCBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIG5ldyBEYXRlKHQuZ2V0VGltZSgpKTtpZih0IGluc3RhbmNlb2YgUmVnRXhwKXtjb25zdCBuPW5ldyBSZWdFeHAodC5zb3VyY2UsdC5mbGFncyk7cmV0dXJuIG4ubGFzdEluZGV4PXQubGFzdEluZGV4LG59aWYodCBpbnN0YW5jZW9mIE1hcCl7Y29uc3Qgbj1uZXcgTWFwO2kuc2V0KHQsbik7Zm9yKGNvbnN0W2Msb11vZiB0KW4uc2V0KGMseShvLGMscyxpLHIpKTtyZXR1cm4gbn1pZih0IGluc3RhbmNlb2YgU2V0KXtjb25zdCBuPW5ldyBTZXQ7aS5zZXQodCxuKTtmb3IoY29uc3QgYyBvZiB0KW4uYWRkKHkoYyx2b2lkIDAscyxpLHIpKTtyZXR1cm4gbn1pZih0eXBlb2YgQnVmZmVyPFwidVwiJiZCdWZmZXIuaXNCdWZmZXIodCkpcmV0dXJuIHQuc3ViYXJyYXkoKTtpZih4KHQpKXtjb25zdCBuPW5ldyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpLmNvbnN0cnVjdG9yKHQubGVuZ3RoKTtpLnNldCh0LG4pO2ZvcihsZXQgYz0wO2M8dC5sZW5ndGg7YysrKW5bY109eSh0W2NdLGMscyxpLHIpO3JldHVybiBufWlmKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8dHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyPFwidVwiJiZ0IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpcmV0dXJuIHQuc2xpY2UoMCk7aWYodCBpbnN0YW5jZW9mIERhdGFWaWV3KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmJ1ZmZlci5zbGljZSgwKSx0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKTtyZXR1cm4gaS5zZXQodCxuKSxtKG4sdCxzLGksciksbn1pZih0eXBlb2YgRmlsZTxcInVcIiYmdCBpbnN0YW5jZW9mIEZpbGUpe2NvbnN0IG49bmV3IEZpbGUoW3RdLHQubmFtZSx7dHlwZTp0LnR5cGV9KTtyZXR1cm4gaS5zZXQodCxuKSxtKG4sdCxzLGksciksbn1pZih0IGluc3RhbmNlb2YgQmxvYil7Y29uc3Qgbj1uZXcgQmxvYihbdF0se3R5cGU6dC50eXBlfSk7cmV0dXJuIGkuc2V0KHQsbiksbShuLHQscyxpLHIpLG59aWYodCBpbnN0YW5jZW9mIEVycm9yKXtjb25zdCBuPW5ldyB0LmNvbnN0cnVjdG9yO3JldHVybiBpLnNldCh0LG4pLG4ubWVzc2FnZT10Lm1lc3NhZ2Usbi5uYW1lPXQubmFtZSxuLnN0YWNrPXQuc3RhY2ssbi5jYXVzZT10LmNhdXNlLG0obix0LHMsaSxyKSxufWlmKHR5cGVvZiB0PT1cIm9iamVjdFwiJiZ0dCh0KSl7Y29uc3Qgbj1PYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSk7cmV0dXJuIGkuc2V0KHQsbiksbShuLHQscyxpLHIpLG59cmV0dXJuIHR9ZnVuY3Rpb24gbSh0LGUscz10LGkscil7Y29uc3QgYT1bLi4uT2JqZWN0LmtleXMoZSksLi4uWihlKV07Zm9yKGxldCBuPTA7bjxhLmxlbmd0aDtuKyspe2NvbnN0IGM9YVtuXSxvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxjKTsobz09bnVsbHx8by53cml0YWJsZSkmJih0W2NdPXkoZVtjXSxjLHMsaSxyKSl9fWZ1bmN0aW9uIHR0KHQpe3N3aXRjaChUKHQpKXtjYXNlIGllOmNhc2UgTWU6Y2FzZSB6ZTpjYXNlIFdlOmNhc2Ugc2U6Y2FzZSBVZTpjYXNlIFplOmNhc2UgVGU6Y2FzZSBYZTpjYXNlIGtlOmNhc2UgUWU6Y2FzZSBCZTpjYXNlIHRlOmNhc2UgR2U6Y2FzZSBGZTpjYXNlIExlOmNhc2UgZWU6Y2FzZSBIZTpjYXNlIEplOmNhc2UgS2U6Y2FzZSBWZTpjYXNlIFllOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIHN0KHQsZSl7cmV0dXJuIGV0KHQsKHMsaSxyLGEpPT57Y29uc3Qgbj1lPy4ocyxpLHIsYSk7aWYobiE9bnVsbClyZXR1cm4gbjtpZih0eXBlb2YgdD09XCJvYmplY3RcIilzd2l0Y2goT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXtjYXNlIHRlOmNhc2UgZWU6Y2FzZSBzZTp7Y29uc3QgYz1uZXcgdC5jb25zdHJ1Y3Rvcih0Py52YWx1ZU9mKCkpO3JldHVybiBtKGMsdCksY31jYXNlIGllOntjb25zdCBjPXt9O3JldHVybiBtKGMsdCksYy5sZW5ndGg9dC5sZW5ndGgsY1tTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSxjfWRlZmF1bHQ6cmV0dXJufX0pfWZ1bmN0aW9uIG5lKHQpe3JldHVybiBzdCh0KX1mdW5jdGlvbiByZSh0KXtyZXR1cm4gdCE9PW51bGwmJnR5cGVvZiB0PT1cIm9iamVjdFwiJiZUKHQpPT09XCJbb2JqZWN0IEFyZ3VtZW50c11cIn1mdW5jdGlvbiBhZSh0KXtyZXR1cm4gdHlwZW9mIHQ9PVwib2JqZWN0XCImJnQhPT1udWxsfWZ1bmN0aW9uIGl0KCl7fWZ1bmN0aW9uIG50KHQpe3JldHVybiB4KHQpfWZ1bmN0aW9uIHJ0KHQpe2lmKHR5cGVvZiB0IT1cIm9iamVjdFwifHx0PT1udWxsKXJldHVybiExO2lmKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KT09PW51bGwpcmV0dXJuITA7aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpIT09XCJbb2JqZWN0IE9iamVjdF1cIil7Y29uc3Qgcz10W1N5bWJvbC50b1N0cmluZ1RhZ107cmV0dXJuIHM9PW51bGx8fCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsU3ltYm9sLnRvU3RyaW5nVGFnKT8ud3JpdGFibGU/ITE6dC50b1N0cmluZygpPT09YFtvYmplY3QgJHtzfV1gfWxldCBlPXQ7Zm9yKDtPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkhPT1udWxsOyllPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpPT09ZX1mdW5jdGlvbiBhdCh0KXtpZihfKHQpKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCl8fHgodCl8fHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8dHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyPFwidVwiJiZ0IGluc3RhbmNlb2YgU2hhcmVkQXJyYXlCdWZmZXIpcmV0dXJuIHQuc2xpY2UoMCk7Y29uc3QgZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCkscz1lLmNvbnN0cnVjdG9yO2lmKHQgaW5zdGFuY2VvZiBEYXRlfHx0IGluc3RhbmNlb2YgTWFwfHx0IGluc3RhbmNlb2YgU2V0KXJldHVybiBuZXcgcyh0KTtpZih0IGluc3RhbmNlb2YgUmVnRXhwKXtjb25zdCBpPW5ldyBzKHQpO3JldHVybiBpLmxhc3RJbmRleD10Lmxhc3RJbmRleCxpfWlmKHQgaW5zdGFuY2VvZiBEYXRhVmlldylyZXR1cm4gbmV3IHModC5idWZmZXIuc2xpY2UoMCkpO2lmKHQgaW5zdGFuY2VvZiBFcnJvcil7Y29uc3QgaT1uZXcgcyh0Lm1lc3NhZ2UpO3JldHVybiBpLnN0YWNrPXQuc3RhY2ssaS5uYW1lPXQubmFtZSxpLmNhdXNlPXQuY2F1c2UsaX1pZih0eXBlb2YgRmlsZTxcInVcIiYmdCBpbnN0YW5jZW9mIEZpbGUpcmV0dXJuIG5ldyBzKFt0XSx0Lm5hbWUse3R5cGU6dC50eXBlLGxhc3RNb2RpZmllZDp0Lmxhc3RNb2RpZmllZH0pO2lmKHR5cGVvZiB0PT1cIm9iamVjdFwiKXtjb25zdCBpPU9iamVjdC5jcmVhdGUoZSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oaSx0KX1yZXR1cm4gdH1mdW5jdGlvbiBjdCh0LC4uLmUpe2NvbnN0IHM9ZS5zbGljZSgwLC0xKSxpPWVbZS5sZW5ndGgtMV07bGV0IHI9dDtmb3IobGV0IGE9MDthPHMubGVuZ3RoO2ErKyl7Y29uc3Qgbj1zW2FdO3I9JChyLG4saSxuZXcgTWFwKX1yZXR1cm4gcn1mdW5jdGlvbiAkKHQsZSxzLGkpe2lmKF8odCkmJih0PU9iamVjdCh0KSksZT09bnVsbHx8dHlwZW9mIGUhPVwib2JqZWN0XCIpcmV0dXJuIHQ7aWYoaS5oYXMoZSkpcmV0dXJuIGF0KGkuZ2V0KGUpKTtpZihpLnNldChlLHQpLEFycmF5LmlzQXJyYXkoZSkpe2U9ZS5zbGljZSgpO2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKWVbYV09ZVthXT8/dm9pZCAwfWNvbnN0IHI9Wy4uLk9iamVjdC5rZXlzKGUpLC4uLlooZSldO2ZvcihsZXQgYT0wO2E8ci5sZW5ndGg7YSsrKXtjb25zdCBuPXJbYV07bGV0IGM9ZVtuXSxvPXRbbl07aWYocmUoYykmJihjPXsuLi5jfSkscmUobykmJihvPXsuLi5vfSksdHlwZW9mIEJ1ZmZlcjxcInVcIiYmQnVmZmVyLmlzQnVmZmVyKGMpJiYoYz1uZShjKSksQXJyYXkuaXNBcnJheShjKSlpZih0eXBlb2Ygbz09XCJvYmplY3RcIiYmbyE9bnVsbCl7Y29uc3QgbD1bXSxwPVJlZmxlY3Qub3duS2V5cyhvKTtmb3IobGV0IGY9MDtmPHAubGVuZ3RoO2YrKyl7Y29uc3QgdT1wW2ZdO2xbdV09b1t1XX1vPWx9ZWxzZSBvPVtdO2NvbnN0IGg9cyhvLGMsbix0LGUsaSk7aCE9bnVsbD90W25dPWg6QXJyYXkuaXNBcnJheShjKXx8YWUobykmJmFlKGMpP3Rbbl09JChvLGMscyxpKTpvPT1udWxsJiZydChjKT90W25dPSQoe30sYyxzLGkpOm89PW51bGwmJm50KGMpP3Rbbl09bmUoYyk6KG89PT12b2lkIDB8fGMhPT12b2lkIDApJiYodFtuXT1jKX1yZXR1cm4gdH1mdW5jdGlvbiBvdCh0LC4uLmUpe3JldHVybiBjdCh0LC4uLmUsaXQpfWNvbnN0IGNlPVwiZXJyb3JcIixwdD1cIndzczovL3JlbGF5LndhbGxldGNvbm5lY3Qub3JnXCIsaHQ9XCJ3Y1wiLG9lPVwidW5pdmVyc2FsX3Byb3ZpZGVyXCIsQT1gJHtodH1AMjoke29lfTpgLHBlPVwiaHR0cHM6Ly9ycGMud2FsbGV0Y29ubmVjdC5vcmcvdjEvXCIsaGU9XCJnZW5lcmljXCIsbHQ9YCR7cGV9YnVuZGxlcmAsdj1cImNhbGxfc3RhdHVzXCIsdXQ9ODY0MDAsRj17REVGQVVMVF9DSEFJTl9DSEFOR0VEOlwiZGVmYXVsdF9jaGFpbl9jaGFuZ2VkXCJ9O3ZhciBkdD1PYmplY3QuZGVmaW5lUHJvcGVydHksZnQ9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsbXQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsbGU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxndD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHl0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsdWU9KHQsZSxzKT0+ZSBpbiB0P2R0KHQsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6c30pOnRbZV09cyxFPSh0LGUpPT57Zm9yKHZhciBzIGluIGV8fChlPXt9KSlndC5jYWxsKGUscykmJnVlKHQscyxlW3NdKTtpZihsZSlmb3IodmFyIHMgb2YgbGUoZSkpeXQuY2FsbChlLHMpJiZ1ZSh0LHMsZVtzXSk7cmV0dXJuIHR9LHZ0PSh0LGUpPT5mdCh0LG10KGUpKTtmdW5jdGlvbiBkZSh0LGUscyl7dmFyIGk7Y29uc3Qgcj1JKHQpO3JldHVybigoaT1lLnJwY01hcCk9PW51bGw/dm9pZCAwOmlbci5yZWZlcmVuY2VdKXx8YCR7cGV9P2NoYWluSWQ9JHtyLm5hbWVzcGFjZX06JHtyLnJlZmVyZW5jZX0mcHJvamVjdElkPSR7c31gfWZ1bmN0aW9uIHd0KHQpe3JldHVybiB0LmluY2x1ZGVzKFwiOlwiKT90LnNwbGl0KFwiOlwiKVsxXTp0fWZ1bmN0aW9uIGZlKHQpe3JldHVybiB0Lm1hcChlPT5gJHtlLnNwbGl0KFwiOlwiKVswXX06JHtlLnNwbGl0KFwiOlwiKVsxXX1gKX1mdW5jdGlvbiBidCh0LGUpe2NvbnN0IHM9T2JqZWN0LmtleXMoZS5uYW1lc3BhY2VzKS5maWx0ZXIocj0+ci5pbmNsdWRlcyh0KSk7aWYoIXMubGVuZ3RoKXJldHVybltdO2NvbnN0IGk9W107cmV0dXJuIHMuZm9yRWFjaChyPT57Y29uc3QgYT1lLm5hbWVzcGFjZXNbcl0uYWNjb3VudHM7aS5wdXNoKC4uLmEpfSksaX1mdW5jdGlvbiBtZSh0KXtyZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHQpLmZpbHRlcigoW2Usc10pPT57dmFyIGkscjtyZXR1cm4oKGk9cz8uY2hhaW5zKT09bnVsbD92b2lkIDA6aS5sZW5ndGgpJiYoKHI9cz8uY2hhaW5zKT09bnVsbD92b2lkIDA6ci5sZW5ndGgpPjB9KSl9ZnVuY3Rpb24gQyh0PXt9LGU9e30pe2NvbnN0IHM9bWUoZ2UodCkpLGk9bWUoZ2UoZSkpO3JldHVybiBvdChzLGkpfWZ1bmN0aW9uIGdlKHQpe3ZhciBlLHMsaSxyLGE7Y29uc3Qgbj17fTtpZighUCh0KSlyZXR1cm4gbjtmb3IoY29uc3RbYyxvXW9mIE9iamVjdC5lbnRyaWVzKHQpKXtjb25zdCBoPVYoYyk/W2NdOm8uY2hhaW5zLGw9by5tZXRob2RzfHxbXSxwPW8uZXZlbnRzfHxbXSxmPW8ucnBjTWFwfHx7fSx1PU8oYyk7blt1XT12dChFKEUoe30sblt1XSksbykse2NoYWluczpEKGgsKGU9blt1XSk9PW51bGw/dm9pZCAwOmUuY2hhaW5zKSxtZXRob2RzOkQobCwocz1uW3VdKT09bnVsbD92b2lkIDA6cy5tZXRob2RzKSxldmVudHM6RChwLChpPW5bdV0pPT1udWxsP3ZvaWQgMDppLmV2ZW50cyl9KSwoUChmKXx8UCgoKHI9blt1XSk9PW51bGw/dm9pZCAwOnIucnBjTWFwKXx8e30pKSYmKG5bdV0ucnBjTWFwPUUoRSh7fSxmKSwoYT1uW3VdKT09bnVsbD92b2lkIDA6YS5ycGNNYXApKX1yZXR1cm4gbn1mdW5jdGlvbiB5ZSh0KXtyZXR1cm4gdC5pbmNsdWRlcyhcIjpcIik/dC5zcGxpdChcIjpcIilbMl06dH1mdW5jdGlvbiB2ZSh0KXtjb25zdCBlPXt9O2Zvcihjb25zdFtzLGldb2YgT2JqZWN0LmVudHJpZXModCkpe2NvbnN0IHI9aS5tZXRob2RzfHxbXSxhPWkuZXZlbnRzfHxbXSxuPWkuYWNjb3VudHN8fFtdLGM9VihzKT9bc106aS5jaGFpbnM/aS5jaGFpbnM6ZmUoaS5hY2NvdW50cyk7ZVtzXT17Y2hhaW5zOmMsbWV0aG9kczpyLGV2ZW50czphLGFjY291bnRzOm59fXJldHVybiBlfWZ1bmN0aW9uIEgodCl7cmV0dXJuIHR5cGVvZiB0PT1cIm51bWJlclwiP3Q6dC5pbmNsdWRlcyhcIjB4XCIpP3BhcnNlSW50KHQsMTYpOih0PXQuaW5jbHVkZXMoXCI6XCIpP3Quc3BsaXQoXCI6XCIpWzFdOnQsaXNOYU4oTnVtYmVyKHQpKT90Ok51bWJlcih0KSl9ZnVuY3Rpb24gUHQodCl7dHJ5e2NvbnN0IGU9SlNPTi5wYXJzZSh0KTtyZXR1cm4gdHlwZW9mIGU9PVwib2JqZWN0XCImJmUhPT1udWxsJiYhQXJyYXkuaXNBcnJheShlKX1jYXRjaHtyZXR1cm4hMX19Y29uc3Qgd2U9e30sdz10PT53ZVt0XSxVPSh0LGUpPT57d2VbdF09ZX07dmFyIE90PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxiZT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLEl0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksU3Q9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxQZT0odCxlLHMpPT5lIGluIHQ/T3QodCxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpzfSk6dFtlXT1zLE9lPSh0LGUpPT57Zm9yKHZhciBzIGluIGV8fChlPXt9KSlJdC5jYWxsKGUscykmJlBlKHQscyxlW3NdKTtpZihiZSlmb3IodmFyIHMgb2YgYmUoZSkpU3QuY2FsbChlLHMpJiZQZSh0LHMsZVtzXSk7cmV0dXJuIHR9O2NvbnN0IEllPVwiZWlwMTU1XCIsJHQ9W1wiYXRvbWljXCIsXCJmbG93LWNvbnRyb2xcIixcInBheW1hc3RlclNlcnZpY2VcIixcInNlc3Npb25LZXlzXCIsXCJhdXhpbGlhcnlGdW5kc1wiXSxBdD10PT50JiZ0LnN0YXJ0c1dpdGgoXCIweFwiKT9CaWdJbnQodCkudG9TdHJpbmcoMTApOnQsQj10PT50JiZ0LnN0YXJ0c1dpdGgoXCIweFwiKT90OmAweCR7QmlnSW50KHQpLnRvU3RyaW5nKDE2KX1gLFNlPXQ9Pk9iamVjdC5rZXlzKHQpLmZpbHRlcihlPT4kdC5pbmNsdWRlcyhlKSkucmVkdWNlKChlLHMpPT4oZVtzXT1FdCh0W3NdKSxlKSx7fSksRXQ9dD0+dHlwZW9mIHQ9PVwic3RyaW5nXCImJlB0KHQpP0pTT04ucGFyc2UodCk6dCxDdD0odCxlLHMpPT57Y29uc3R7c2Vzc2lvblByb3BlcnRpZXM6aT17fSxzY29wZWRQcm9wZXJ0aWVzOnI9e319PXQsYT17fTtpZighUChyKSYmIVAoaSkpcmV0dXJuO2NvbnN0IG49U2UoaSk7Zm9yKGNvbnN0IGMgb2Ygcyl7Y29uc3Qgbz1BdChjKTtpZighbyljb250aW51ZTthW0IobyldPW47Y29uc3QgaD1yPy5bYCR7SWV9OiR7b31gXTtpZihoKXtjb25zdCBsPWg/LltgJHtJZX06JHtvfToke2V9YF07YVtCKG8pXT1PZShPZSh7fSxhW0IobyldKSxTZShsfHxoKSl9fWZvcihjb25zdFtjLG9db2YgT2JqZWN0LmVudHJpZXMoYSkpT2JqZWN0LmtleXMobykubGVuZ3RoPT09MCYmZGVsZXRlIGFbY107cmV0dXJuIE9iamVjdC5rZXlzKGEpLmxlbmd0aD4wP2E6dm9pZCAwfTt2YXIganQ9T2JqZWN0LmRlZmluZVByb3BlcnR5LE50PSh0LGUscyk9PmUgaW4gdD9qdCh0LGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnN9KTp0W2VdPXMscXQ9KHQsZSxzKT0+TnQodCx0eXBlb2YgZSE9XCJzeW1ib2xcIj9lK1wiXCI6ZSxzKTtsZXQgTDtjbGFzcyBKe2NvbnN0cnVjdG9yKGUpe3F0KHRoaXMsXCJzdG9yYWdlXCIpLHRoaXMuc3RvcmFnZT1lfWFzeW5jIGdldEl0ZW0oZSl7cmV0dXJuIGF3YWl0IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGUpfWFzeW5jIHNldEl0ZW0oZSxzKXtyZXR1cm4gYXdhaXQgdGhpcy5zdG9yYWdlLnNldEl0ZW0oZSxzKX1hc3luYyByZW1vdmVJdGVtKGUpe3JldHVybiBhd2FpdCB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShlKX1zdGF0aWMgZ2V0U3RvcmFnZShlKXtyZXR1cm4gTHx8KEw9bmV3IEooZSkpLEx9fXZhciBEdD1PYmplY3QuZGVmaW5lUHJvcGVydHksUnQ9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsX3Q9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsJGU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyx4dD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LEZ0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsQWU9KHQsZSxzKT0+ZSBpbiB0P0R0KHQsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6c30pOnRbZV09cyxIdD0odCxlKT0+e2Zvcih2YXIgcyBpbiBlfHwoZT17fSkpeHQuY2FsbChlLHMpJiZBZSh0LHMsZVtzXSk7aWYoJGUpZm9yKHZhciBzIG9mICRlKGUpKUZ0LmNhbGwoZSxzKSYmQWUodCxzLGVbc10pO3JldHVybiB0fSxVdD0odCxlKT0+UnQodCxfdChlKSk7YXN5bmMgZnVuY3Rpb24gQnQodCxlKXtjb25zdCBzPUkodC5yZXN1bHQuY2FwYWJpbGl0aWVzLmNhaXAzNDUuY2FpcDIpLGk9dC5yZXN1bHQuY2FwYWJpbGl0aWVzLmNhaXAzNDUudHJhbnNhY3Rpb25IYXNoZXMscj1hd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoaS5tYXAocD0+THQocy5yZWZlcmVuY2UscCxlKSkpLGE9ci5maWx0ZXIocD0+cC5zdGF0dXM9PT1cImZ1bGZpbGxlZFwiKS5tYXAocD0+cC52YWx1ZSkuZmlsdGVyKHA9PnApO3IuZmlsdGVyKHA9PnAuc3RhdHVzPT09XCJyZWplY3RlZFwiKS5mb3JFYWNoKHA9PmNvbnNvbGUud2FybihcIkZhaWxlZCB0byBmZXRjaCB0cmFuc2FjdGlvbiByZWNlaXB0OlwiLHAucmVhc29uKSk7Y29uc3Qgbj0hYS5sZW5ndGh8fGEuc29tZShwPT4hcCksYz1hLmV2ZXJ5KHA9PnA/LnN0YXR1cz09PVwiMHgxXCIpLG89YS5ldmVyeShwPT5wPy5zdGF0dXM9PT1cIjB4MFwiKSxoPWEuc29tZShwPT5wPy5zdGF0dXM9PT1cIjB4MFwiKTtsZXQgbDtyZXR1cm4gbj9sPTEwMDpjP2w9MjAwOm8/bD01MDA6aCYmKGw9NjAwKSx7aWQ6dC5yZXN1bHQuaWQsdmVyc2lvbjp0LnJlcXVlc3QudmVyc2lvbixhdG9taWM6dC5yZXF1ZXN0LmF0b21pY1JlcXVpcmVkLGNoYWluSWQ6dC5yZXF1ZXN0LmNoYWluSWQsY2FwYWJpbGl0aWVzOnQucmVzdWx0LmNhcGFiaWxpdGllcyxyZWNlaXB0czphLHN0YXR1czpsfX1hc3luYyBmdW5jdGlvbiBMdCh0LGUscyl7cmV0dXJuIGF3YWl0IHMocGFyc2VJbnQodCkpLnJlcXVlc3QoayhcImV0aF9nZXRUcmFuc2FjdGlvblJlY2VpcHRcIixbZV0pKX1hc3luYyBmdW5jdGlvbiBNdCh7c2VuZENhbGxzOnQsc3RvcmFnZTplfSl7Y29uc3Qgcz1hd2FpdCBlLmdldEl0ZW0odik7YXdhaXQgZS5zZXRJdGVtKHYsVXQoSHQoe30scykse1t0LnJlc3VsdC5pZF06e3JlcXVlc3Q6dC5yZXF1ZXN0LHJlc3VsdDp0LnJlc3VsdCxleHBpcnk6TmUodXQpfX0pKX1hc3luYyBmdW5jdGlvbiB6dCh7cmVzdWx0SWQ6dCxzdG9yYWdlOmV9KXtjb25zdCBzPWF3YWl0IGUuZ2V0SXRlbSh2KTtpZihzKXtkZWxldGUgc1t0XSxhd2FpdCBlLnNldEl0ZW0odixzKTtmb3IoY29uc3QgaSBpbiBzKVkoc1tpXS5leHBpcnkpJiZkZWxldGUgc1tpXTthd2FpdCBlLnNldEl0ZW0odixzKX19YXN5bmMgZnVuY3Rpb24gR3Qoe3Jlc3VsdElkOnQsc3RvcmFnZTplfSl7Y29uc3Qgcz1hd2FpdCBlLmdldEl0ZW0odiksaT1zPy5bdF07aWYoaSYmIVkoaS5leHBpcnkpKXJldHVybiBpO2F3YWl0IHp0KHtyZXN1bHRJZDp0LHN0b3JhZ2U6ZX0pfXZhciBXdD1PYmplY3QuZGVmaW5lUHJvcGVydHksSnQ9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsS3Q9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsRWU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxWdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFl0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsTT0odCxlLHMpPT5lIGluIHQ/V3QodCxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpzfSk6dFtlXT1zLHo9KHQsZSk9Pntmb3IodmFyIHMgaW4gZXx8KGU9e30pKVZ0LmNhbGwoZSxzKSYmTSh0LHMsZVtzXSk7aWYoRWUpZm9yKHZhciBzIG9mIEVlKGUpKVl0LmNhbGwoZSxzKSYmTSh0LHMsZVtzXSk7cmV0dXJuIHR9LEc9KHQsZSk9Pkp0KHQsS3QoZSkpLGc9KHQsZSxzKT0+TSh0LHR5cGVvZiBlIT1cInN5bWJvbFwiP2UrXCJcIjplLHMpO2NsYXNzIFh0e2NvbnN0cnVjdG9yKGUpe2codGhpcyxcIm5hbWVcIixcImVpcDE1NVwiKSxnKHRoaXMsXCJjbGllbnRcIiksZyh0aGlzLFwiY2hhaW5JZFwiKSxnKHRoaXMsXCJuYW1lc3BhY2VcIiksZyh0aGlzLFwiaHR0cFByb3ZpZGVyc1wiKSxnKHRoaXMsXCJldmVudHNcIiksZyh0aGlzLFwic3RvcmFnZVwiKSx0aGlzLm5hbWVzcGFjZT1lLm5hbWVzcGFjZSx0aGlzLmV2ZW50cz13KFwiZXZlbnRzXCIpLHRoaXMuY2xpZW50PXcoXCJjbGllbnRcIiksdGhpcy5odHRwUHJvdmlkZXJzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVycygpLHRoaXMuY2hhaW5JZD1wYXJzZUludCh0aGlzLmdldERlZmF1bHRDaGFpbigpKSx0aGlzLnN0b3JhZ2U9Si5nZXRTdG9yYWdlKHRoaXMuY2xpZW50LmNvcmUuc3RvcmFnZSl9YXN5bmMgcmVxdWVzdChlKXtzd2l0Y2goZS5yZXF1ZXN0Lm1ldGhvZCl7Y2FzZVwiZXRoX3JlcXVlc3RBY2NvdW50c1wiOnJldHVybiB0aGlzLmdldEFjY291bnRzKCk7Y2FzZVwiZXRoX2FjY291bnRzXCI6cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKTtjYXNlXCJ3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpblwiOnJldHVybiBhd2FpdCB0aGlzLmhhbmRsZVN3aXRjaENoYWluKGUpO2Nhc2VcImV0aF9jaGFpbklkXCI6cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0RGVmYXVsdENoYWluKCkpO2Nhc2VcIndhbGxldF9nZXRDYXBhYmlsaXRpZXNcIjpyZXR1cm4gYXdhaXQgdGhpcy5nZXRDYXBhYmlsaXRpZXMoZSk7Y2FzZVwid2FsbGV0X2dldENhbGxzU3RhdHVzXCI6cmV0dXJuIGF3YWl0IHRoaXMuZ2V0Q2FsbFN0YXR1cyhlKTtjYXNlXCJ3YWxsZXRfc2VuZENhbGxzXCI6cmV0dXJuIGF3YWl0IHRoaXMuc2VuZENhbGxzKGUpfXJldHVybiB0aGlzLm5hbWVzcGFjZS5tZXRob2RzLmluY2x1ZGVzKGUucmVxdWVzdC5tZXRob2QpP2F3YWl0IHRoaXMuY2xpZW50LnJlcXVlc3QoZSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9dXBkYXRlTmFtZXNwYWNlKGUpe3RoaXMubmFtZXNwYWNlPU9iamVjdC5hc3NpZ24odGhpcy5uYW1lc3BhY2UsZSl9c2V0RGVmYXVsdENoYWluKGUscyl7dGhpcy5odHRwUHJvdmlkZXJzW2VdfHx0aGlzLnNldEh0dHBQcm92aWRlcihwYXJzZUludChlKSxzKTtjb25zdCBpPXRoaXMuY2hhaW5JZDt0aGlzLmNoYWluSWQ9cGFyc2VJbnQoZSksdGhpcy5ldmVudHMuZW1pdChGLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCx7Y3VycmVudENhaXBDaGFpbklkOmAke3RoaXMubmFtZX06JHtlfWAscHJldmlvdXNDYWlwQ2hhaW5JZDpgJHt0aGlzLm5hbWV9OiR7aX1gfSl9cmVxdWVzdEFjY291bnRzKCl7cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKX1nZXREZWZhdWx0Q2hhaW4oKXtpZih0aGlzLmNoYWluSWQpcmV0dXJuIHRoaXMuY2hhaW5JZC50b1N0cmluZygpO2lmKHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbilyZXR1cm4gdGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluO2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuY2hhaW5zWzBdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNoYWluSWQgbm90IGZvdW5kXCIpO3JldHVybiBlLnNwbGl0KFwiOlwiKVsxXX1jcmVhdGVIdHRwUHJvdmlkZXIoZSxzKXtjb25zdCBpPXN8fGRlKGAke3RoaXMubmFtZX06JHtlfWAsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3JldHVybiBuZXcgUShuZXcgX2UoaSx3KFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiKSkpfXNldEh0dHBQcm92aWRlcihlLHMpe2NvbnN0IGk9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSxzKTtpJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPWkpfWNyZWF0ZUh0dHBQcm92aWRlcnMoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLm5hbWVzcGFjZS5jaGFpbnMuZm9yRWFjaChzPT57dmFyIGk7Y29uc3Qgcj1wYXJzZUludCh3dChzKSk7ZVtyXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihyLChpPXRoaXMubmFtZXNwYWNlLnJwY01hcCk9PW51bGw/dm9pZCAwOmlbc10pfSksZX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/Wy4uLm5ldyBTZXQoZS5maWx0ZXIocz0+cy5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHM9PnMuc3BsaXQoXCI6XCIpWzJdKSldOltdfWdldEh0dHBQcm92aWRlcihlKXtjb25zdCBzPWV8fHRoaXMuY2hhaW5JZDtyZXR1cm4gdGhpcy5odHRwUHJvdmlkZXJzW3NdfHwodGhpcy5odHRwUHJvdmlkZXJzPUcoeih7fSx0aGlzLmh0dHBQcm92aWRlcnMpLHtbc106dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIocyl9KSx0aGlzLmh0dHBQcm92aWRlcnNbc10pfWFzeW5jIGhhbmRsZVN3aXRjaENoYWluKGUpe3ZhciBzLGk7bGV0IHI9ZS5yZXF1ZXN0LnBhcmFtcz8ocz1lLnJlcXVlc3QucGFyYW1zWzBdKT09bnVsbD92b2lkIDA6cy5jaGFpbklkOlwiMHgwXCI7cj1yLnN0YXJ0c1dpdGgoXCIweFwiKT9yOmAweCR7cn1gO2NvbnN0IGE9cGFyc2VJbnQociwxNik7aWYodGhpcy5pc0NoYWluQXBwcm92ZWQoYSkpdGhpcy5zZXREZWZhdWx0Q2hhaW4oYCR7YX1gKTtlbHNlIGlmKHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoXCJ3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpblwiKSlhd2FpdCB0aGlzLmNsaWVudC5yZXF1ZXN0KHt0b3BpYzplLnRvcGljLHJlcXVlc3Q6e21ldGhvZDplLnJlcXVlc3QubWV0aG9kLHBhcmFtczpbe2NoYWluSWQ6cn1dfSxjaGFpbklkOihpPXRoaXMubmFtZXNwYWNlLmNoYWlucyk9PW51bGw/dm9pZCAwOmlbMF19KSx0aGlzLnNldERlZmF1bHRDaGFpbihgJHthfWApO2Vsc2UgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc3dpdGNoIHRvIGNoYWluICdlaXAxNTU6JHthfScuIFRoZSBjaGFpbiBpcyBub3QgYXBwcm92ZWQgb3IgdGhlIHdhbGxldCBkb2VzIG5vdCBzdXBwb3J0ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicgbWV0aG9kLmApO3JldHVybiBudWxsfWlzQ2hhaW5BcHByb3ZlZChlKXtyZXR1cm4gdGhpcy5uYW1lc3BhY2UuY2hhaW5zLmluY2x1ZGVzKGAke3RoaXMubmFtZX06JHtlfWApfWFzeW5jIGdldENhcGFiaWxpdGllcyhlKXt2YXIgcyxpLHIsYSxuO2NvbnN0IGM9KGk9KHM9ZS5yZXF1ZXN0KT09bnVsbD92b2lkIDA6cy5wYXJhbXMpPT1udWxsP3ZvaWQgMDppWzBdLG89KChhPShyPWUucmVxdWVzdCk9PW51bGw/dm9pZCAwOnIucGFyYW1zKT09bnVsbD92b2lkIDA6YVsxXSl8fFtdO2lmKCFjKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgYWRkcmVzcyBwYXJhbWV0ZXIgaW4gYHdhbGxldF9nZXRDYXBhYmlsaXRpZXNgIHJlcXVlc3RcIik7Y29uc3QgaD10aGlzLmNsaWVudC5zZXNzaW9uLmdldChlLnRvcGljKSxsPSgobj1oPy5zZXNzaW9uUHJvcGVydGllcyk9PW51bGw/dm9pZCAwOm4uY2FwYWJpbGl0aWVzKXx8e30scD1gJHtjfSR7by5qb2luKFwiLFwiKX1gLGY9bD8uW3BdO2lmKGYpcmV0dXJuIGY7bGV0IHU7dHJ5e3U9Q3QoaCxjLG8pfWNhdGNoKHEpe2NvbnNvbGUud2FybihcIkZhaWxlZCB0byBleHRyYWN0IGNhcGFiaWxpdGllcyBmcm9tIHNlc3Npb25cIixxKX1pZih1KXJldHVybiB1O2NvbnN0IEs9YXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdChlKTt0cnl7YXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi51cGRhdGUoZS50b3BpYyx7c2Vzc2lvblByb3BlcnRpZXM6Ryh6KHt9LGguc2Vzc2lvblByb3BlcnRpZXN8fHt9KSx7Y2FwYWJpbGl0aWVzOkcoeih7fSxsfHx7fSkse1twXTpLfSl9KX0pfWNhdGNoKHEpe2NvbnNvbGUud2FybihcIkZhaWxlZCB0byB1cGRhdGUgc2Vzc2lvbiB3aXRoIGNhcGFiaWxpdGllc1wiLHEpfXJldHVybiBLfWFzeW5jIGdldENhbGxTdGF0dXMoZSl7dmFyIHMsaSxyO2NvbnN0IGE9dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQoZS50b3BpYyksbj0ocz1hLnNlc3Npb25Qcm9wZXJ0aWVzKT09bnVsbD92b2lkIDA6cy5idW5kbGVyX25hbWU7aWYobil7Y29uc3QgaD10aGlzLmdldEJ1bmRsZXJVcmwoZS5jaGFpbklkLG4pO3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5nZXRVc2VyT3BlcmF0aW9uUmVjZWlwdChoLGUpfWNhdGNoKGwpe2NvbnNvbGUud2FybihcIkZhaWxlZCB0byBmZXRjaCBjYWxsIHN0YXR1cyBmcm9tIGJ1bmRsZXJcIixsLGgpfX1jb25zdCBjPShpPWEuc2Vzc2lvblByb3BlcnRpZXMpPT1udWxsP3ZvaWQgMDppLmJ1bmRsZXJfdXJsO2lmKGMpdHJ5e3JldHVybiBhd2FpdCB0aGlzLmdldFVzZXJPcGVyYXRpb25SZWNlaXB0KGMsZSl9Y2F0Y2goaCl7Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGZldGNoIGNhbGwgc3RhdHVzIGZyb20gY3VzdG9tIGJ1bmRsZXJcIixoLGMpfWNvbnN0IG89YXdhaXQgR3Qoe3Jlc3VsdElkOihyPWUucmVxdWVzdC5wYXJhbXMpPT1udWxsP3ZvaWQgMDpyWzBdLHN0b3JhZ2U6dGhpcy5zdG9yYWdlfSk7aWYobyl0cnl7cmV0dXJuIGF3YWl0IEJ0KG8sdGhpcy5nZXRIdHRwUHJvdmlkZXIuYmluZCh0aGlzKSl9Y2F0Y2goaCl7Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGZldGNoIGNhbGwgc3RhdHVzIGZyb20gc3RvcmVkIHNlbmQgY2FsbHNcIixoLG8pfWlmKHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCkpcmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50LnJlcXVlc3QoZSk7dGhyb3cgbmV3IEVycm9yKFwiRmV0Y2hpbmcgY2FsbCBzdGF0dXMgbm90IGFwcHJvdmVkIGJ5IHRoZSB3YWxsZXQuXCIpfWFzeW5jIGdldFVzZXJPcGVyYXRpb25SZWNlaXB0KGUscyl7dmFyIGk7Y29uc3Qgcj1uZXcgVVJMKGUpLGE9YXdhaXQgZmV0Y2gocix7bWV0aG9kOlwiUE9TVFwiLGhlYWRlcnM6e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uXCJ9LGJvZHk6SlNPTi5zdHJpbmdpZnkoayhcImV0aF9nZXRVc2VyT3BlcmF0aW9uUmVjZWlwdFwiLFsoaT1zLnJlcXVlc3QucGFyYW1zKT09bnVsbD92b2lkIDA6aVswXV0pKX0pO2lmKCFhLm9rKXRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHVzZXIgb3BlcmF0aW9uIHJlY2VpcHQgLSAke2Euc3RhdHVzfWApO3JldHVybiBhd2FpdCBhLmpzb24oKX1nZXRCdW5kbGVyVXJsKGUscyl7cmV0dXJuYCR7bHR9P3Byb2plY3RJZD0ke3RoaXMuY2xpZW50LmNvcmUucHJvamVjdElkfSZjaGFpbklkPSR7ZX0mYnVuZGxlcj0ke3N9YH1hc3luYyBzZW5kQ2FsbHMoZSl7dmFyIHMsaSxyO2NvbnN0IGE9YXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdChlKSxuPShzPWUucmVxdWVzdC5wYXJhbXMpPT1udWxsP3ZvaWQgMDpzWzBdLGM9YT8uaWQsbz1hPy5jYXBhYmlsaXRpZXN8fHt9LGg9KGk9bz8uY2FpcDM0NSk9PW51bGw/dm9pZCAwOmkuY2FpcDIsbD0ocj1vPy5jYWlwMzQ1KT09bnVsbD92b2lkIDA6ci50cmFuc2FjdGlvbkhhc2hlcztyZXR1cm4hY3x8IWh8fCEobCE9bnVsbCYmbC5sZW5ndGgpfHxhd2FpdCBNdCh7c2VuZENhbGxzOntyZXF1ZXN0Om4scmVzdWx0OmF9LHN0b3JhZ2U6dGhpcy5zdG9yYWdlfSksYX19dmFyIGt0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxRdD0odCxlLHMpPT5lIGluIHQ/a3QodCxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpzfSk6dFtlXT1zLGI9KHQsZSxzKT0+UXQodCx0eXBlb2YgZSE9XCJzeW1ib2xcIj9lK1wiXCI6ZSxzKTtjbGFzcyBadHtjb25zdHJ1Y3RvcihlKXtiKHRoaXMsXCJuYW1lXCIsaGUpLGIodGhpcyxcImNsaWVudFwiKSxiKHRoaXMsXCJodHRwUHJvdmlkZXJzXCIpLGIodGhpcyxcImV2ZW50c1wiKSxiKHRoaXMsXCJuYW1lc3BhY2VcIiksYih0aGlzLFwiY2hhaW5JZFwiKSx0aGlzLm5hbWVzcGFjZT1lLm5hbWVzcGFjZSx0aGlzLmV2ZW50cz13KFwiZXZlbnRzXCIpLHRoaXMuY2xpZW50PXcoXCJjbGllbnRcIiksdGhpcy5jaGFpbklkPXRoaXMuZ2V0RGVmYXVsdENoYWluKCksdGhpcy5uYW1lPXRoaXMuZ2V0TmFtZXNwYWNlTmFtZSgpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2UuY2hhaW5zPVsuLi5uZXcgU2V0KCh0aGlzLm5hbWVzcGFjZS5jaGFpbnN8fFtdKS5jb25jYXQoZS5jaGFpbnN8fFtdKSldLHRoaXMubmFtZXNwYWNlLmFjY291bnRzPVsuLi5uZXcgU2V0KCh0aGlzLm5hbWVzcGFjZS5hY2NvdW50c3x8W10pLmNvbmNhdChlLmFjY291bnRzfHxbXSkpXSx0aGlzLm5hbWVzcGFjZS5tZXRob2RzPVsuLi5uZXcgU2V0KCh0aGlzLm5hbWVzcGFjZS5tZXRob2RzfHxbXSkuY29uY2F0KGUubWV0aG9kc3x8W10pKV0sdGhpcy5uYW1lc3BhY2UuZXZlbnRzPVsuLi5uZXcgU2V0KCh0aGlzLm5hbWVzcGFjZS5ldmVudHN8fFtdKS5jb25jYXQoZS5ldmVudHN8fFtdKSldLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/dGhpcy5jbGllbnQucmVxdWVzdChlKTp0aGlzLmdldEh0dHBQcm92aWRlcihlLmNoYWluSWQpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSxzKXt0aGlzLmh0dHBQcm92aWRlcnNbZV18fHRoaXMuc2V0SHR0cFByb3ZpZGVyKGUscyk7Y29uc3QgaT10aGlzLmNoYWluSWQ7dGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChGLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCx7Y3VycmVudENhaXBDaGFpbklkOmAke3RoaXMubmFtZX06JHtlfWAscHJldmlvdXNDYWlwQ2hhaW5JZDpgJHt0aGlzLm5hbWV9OiR7aX1gfSl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfWdldE5hbWVzcGFjZU5hbWUoKXtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmNoYWluc1swXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbklkIG5vdCBmb3VuZFwiKTtyZXR1cm4gSShlKS5uYW1lc3BhY2V9Z2V0QWNjb3VudHMoKXtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmFjY291bnRzO3JldHVybiBlP1suLi5uZXcgU2V0KGUuZmlsdGVyKHM9PnMuc3BsaXQoXCI6XCIpWzFdPT09dGhpcy5jaGFpbklkLnRvU3RyaW5nKCkpLm1hcChzPT5zLnNwbGl0KFwiOlwiKVsyXSkpXTpbXX1jcmVhdGVIdHRwUHJvdmlkZXJzKCl7dmFyIGUscztjb25zdCBpPXt9O3JldHVybihzPShlPXRoaXMubmFtZXNwYWNlKT09bnVsbD92b2lkIDA6ZS5hY2NvdW50cyk9PW51bGx8fHMuZm9yRWFjaChyPT57dmFyIGEsbjtjb25zdCBjPUkociksbz0obj0oYT10aGlzLm5hbWVzcGFjZSk9PW51bGw/dm9pZCAwOmEucnBjTWFwKT09bnVsbD92b2lkIDA6bltgJHtjLm5hbWVzcGFjZX06JHtjLnJlZmVyZW5jZX1gXTtpW2MucmVmZXJlbmNlXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihyLG8pfSksaX1nZXRIdHRwUHJvdmlkZXIoZSl7Y29uc3Qgcz1JKGUpLnJlZmVyZW5jZSxpPXRoaXMuaHR0cFByb3ZpZGVyc1tzXTtpZih0eXBlb2YgaT5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiBpfXNldEh0dHBQcm92aWRlcihlLHMpe2NvbnN0IGk9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSxzKTtpJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPWkpfWNyZWF0ZUh0dHBQcm92aWRlcihlLHMpe2NvbnN0IGk9c3x8ZGUoZSx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKGBObyBSUEMgdXJsIHByb3ZpZGVkIGZvciBjaGFpbklkOiAke2V9YCk7cmV0dXJuIG5ldyBRKG5ldyBSZShpLHcoXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIpKSl9fXZhciBUdD1PYmplY3QuZGVmaW5lUHJvcGVydHksZXM9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsdHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsQ2U9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxzcz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGlzPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsVz0odCxlLHMpPT5lIGluIHQ/VHQodCxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpzfSk6dFtlXT1zLFM9KHQsZSk9Pntmb3IodmFyIHMgaW4gZXx8KGU9e30pKXNzLmNhbGwoZSxzKSYmVyh0LHMsZVtzXSk7aWYoQ2UpZm9yKHZhciBzIG9mIENlKGUpKWlzLmNhbGwoZSxzKSYmVyh0LHMsZVtzXSk7cmV0dXJuIHR9LGo9KHQsZSk9PmVzKHQsdHMoZSkpLGQ9KHQsZSxzKT0+Vyh0LHR5cGVvZiBlIT1cInN5bWJvbFwiP2UrXCJcIjplLHMpO2NsYXNzIE57Y29uc3RydWN0b3IoZSl7ZCh0aGlzLFwiY2xpZW50XCIpLGQodGhpcyxcIm5hbWVzcGFjZXNcIiksZCh0aGlzLFwib3B0aW9uYWxOYW1lc3BhY2VzXCIpLGQodGhpcyxcInNlc3Npb25Qcm9wZXJ0aWVzXCIpLGQodGhpcyxcInNjb3BlZFByb3BlcnRpZXNcIiksZCh0aGlzLFwiZXZlbnRzXCIsbmV3IHhlKSxkKHRoaXMsXCJycGNQcm92aWRlcnNcIix7fSksZCh0aGlzLFwic2Vzc2lvblwiKSxkKHRoaXMsXCJwcm92aWRlck9wdHNcIiksZCh0aGlzLFwibG9nZ2VyXCIpLGQodGhpcyxcInVyaVwiKSxkKHRoaXMsXCJkaXNhYmxlUHJvdmlkZXJQaW5nXCIsITEpO3ZhciBzLGk7dGhpcy5wcm92aWRlck9wdHM9ZSx0aGlzLmxvZ2dlcj1xZSh7bG9nZ2VyOihzPWUubG9nZ2VyKSE9bnVsbD9zOmNlLG5hbWU6KGk9dGhpcy5wcm92aWRlck9wdHMubmFtZSkhPW51bGw/aTpvZX0pLHRoaXMuZGlzYWJsZVByb3ZpZGVyUGluZz1lPy5kaXNhYmxlUHJvdmlkZXJQaW5nfHwhMX1zdGF0aWMgYXN5bmMgaW5pdChlKXtjb25zdCBzPW5ldyBOKGUpO3JldHVybiBhd2FpdCBzLmluaXRpYWxpemUoKSxzfWFzeW5jIHJlcXVlc3QoZSxzLGkpe2NvbnN0W3IsYV09dGhpcy52YWxpZGF0ZUNoYWluKHMpO2lmKCF0aGlzLnNlc3Npb24pdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGNhbGwgY29ubmVjdCgpIGJlZm9yZSByZXF1ZXN0KClcIik7cmV0dXJuIGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIocikucmVxdWVzdCh7cmVxdWVzdDpTKHt9LGUpLGNoYWluSWQ6YCR7cn06JHthfWAsdG9waWM6dGhpcy5zZXNzaW9uLnRvcGljLGV4cGlyeTppfSl9c2VuZEFzeW5jKGUscyxpLHIpe2NvbnN0IGE9bmV3IERhdGUoKS5nZXRUaW1lKCk7dGhpcy5yZXF1ZXN0KGUsaSxyKS50aGVuKG49PnMobnVsbCxEZShhLG4pKSkuY2F0Y2gobj0+cyhuLHZvaWQgMCkpfWFzeW5jIGVuYWJsZSgpe2lmKCF0aGlzLmNsaWVudCl0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBub3QgaW5pdGlhbGl6ZWRcIik7cmV0dXJuIHRoaXMuc2Vzc2lvbnx8YXdhaXQgdGhpcy5jb25uZWN0KHtuYW1lc3BhY2VzOnRoaXMubmFtZXNwYWNlcyxvcHRpb25hbE5hbWVzcGFjZXM6dGhpcy5vcHRpb25hbE5hbWVzcGFjZXMsc2Vzc2lvblByb3BlcnRpZXM6dGhpcy5zZXNzaW9uUHJvcGVydGllcyxzY29wZWRQcm9wZXJ0aWVzOnRoaXMuc2NvcGVkUHJvcGVydGllc30pLGF3YWl0IHRoaXMucmVxdWVzdEFjY291bnRzKCl9YXN5bmMgZGlzY29ubmVjdCgpe3ZhciBlO2lmKCF0aGlzLnNlc3Npb24pdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGNhbGwgY29ubmVjdCgpIGJlZm9yZSBlbmFibGUoKVwiKTthd2FpdCB0aGlzLmNsaWVudC5kaXNjb25uZWN0KHt0b3BpYzooZT10aGlzLnNlc3Npb24pPT1udWxsP3ZvaWQgMDplLnRvcGljLHJlYXNvbjpYKFwiVVNFUl9ESVNDT05ORUNURURcIil9KSxhd2FpdCB0aGlzLmNsZWFudXAoKX1hc3luYyBjb25uZWN0KGUpe2lmKCF0aGlzLmNsaWVudCl0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBub3QgaW5pdGlhbGl6ZWRcIik7aWYodGhpcy5zZXROYW1lc3BhY2VzKGUpLHRoaXMuY2xlYW51cFBlbmRpbmdQYWlyaW5ncygpLCFlLnNraXBQYWlyaW5nKXJldHVybiBhd2FpdCB0aGlzLnBhaXIoZS5wYWlyaW5nVG9waWMpfWFzeW5jIGF1dGhlbnRpY2F0ZShlLHMpe2lmKCF0aGlzLmNsaWVudCl0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBub3QgaW5pdGlhbGl6ZWRcIik7dGhpcy5zZXROYW1lc3BhY2VzKGUpLGF3YWl0IHRoaXMuY2xlYW51cFBlbmRpbmdQYWlyaW5ncygpO2NvbnN0e3VyaTppLHJlc3BvbnNlOnJ9PWF3YWl0IHRoaXMuY2xpZW50LmF1dGhlbnRpY2F0ZShlLHMpO2kmJih0aGlzLnVyaT1pLHRoaXMuZXZlbnRzLmVtaXQoXCJkaXNwbGF5X3VyaVwiLGkpKTtjb25zdCBhPWF3YWl0IHIoKTtpZih0aGlzLnNlc3Npb249YS5zZXNzaW9uLHRoaXMuc2Vzc2lvbil7Y29uc3Qgbj12ZSh0aGlzLnNlc3Npb24ubmFtZXNwYWNlcyk7dGhpcy5uYW1lc3BhY2VzPUModGhpcy5uYW1lc3BhY2VzLG4pLGF3YWl0IHRoaXMucGVyc2lzdChcIm5hbWVzcGFjZXNcIix0aGlzLm5hbWVzcGFjZXMpLHRoaXMub25Db25uZWN0KCl9cmV0dXJuIGF9b24oZSxzKXt0aGlzLmV2ZW50cy5vbihlLHMpfW9uY2UoZSxzKXt0aGlzLmV2ZW50cy5vbmNlKGUscyl9cmVtb3ZlTGlzdGVuZXIoZSxzKXt0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihlLHMpfW9mZihlLHMpe3RoaXMuZXZlbnRzLm9mZihlLHMpfWdldCBpc1dhbGxldENvbm5lY3QoKXtyZXR1cm4hMH1hc3luYyBwYWlyKGUpe2NvbnN0e3VyaTpzLGFwcHJvdmFsOml9PWF3YWl0IHRoaXMuY2xpZW50LmNvbm5lY3Qoe3BhaXJpbmdUb3BpYzplLHJlcXVpcmVkTmFtZXNwYWNlczp0aGlzLm5hbWVzcGFjZXMsb3B0aW9uYWxOYW1lc3BhY2VzOnRoaXMub3B0aW9uYWxOYW1lc3BhY2VzLHNlc3Npb25Qcm9wZXJ0aWVzOnRoaXMuc2Vzc2lvblByb3BlcnRpZXMsc2NvcGVkUHJvcGVydGllczp0aGlzLnNjb3BlZFByb3BlcnRpZXN9KTtzJiYodGhpcy51cmk9cyx0aGlzLmV2ZW50cy5lbWl0KFwiZGlzcGxheV91cmlcIixzKSk7Y29uc3Qgcj1hd2FpdCBpKCk7dGhpcy5zZXNzaW9uPXI7Y29uc3QgYT12ZShyLm5hbWVzcGFjZXMpO3JldHVybiB0aGlzLm5hbWVzcGFjZXM9Qyh0aGlzLm5hbWVzcGFjZXMsYSksYXdhaXQgdGhpcy5wZXJzaXN0KFwibmFtZXNwYWNlc1wiLHRoaXMubmFtZXNwYWNlcyksYXdhaXQgdGhpcy5wZXJzaXN0KFwib3B0aW9uYWxOYW1lc3BhY2VzXCIsdGhpcy5vcHRpb25hbE5hbWVzcGFjZXMpLHRoaXMub25Db25uZWN0KCksdGhpcy5zZXNzaW9ufXNldERlZmF1bHRDaGFpbihlLHMpe3RyeXtpZighdGhpcy5zZXNzaW9uKXJldHVybjtjb25zdFtpLHJdPXRoaXMudmFsaWRhdGVDaGFpbihlKTt0aGlzLmdldFByb3ZpZGVyKGkpLnNldERlZmF1bHRDaGFpbihyLHMpfWNhdGNoKGkpe2lmKCEvUGxlYXNlIGNhbGwgY29ubmVjdC8udGVzdChpLm1lc3NhZ2UpKXRocm93IGl9fWFzeW5jIGNsZWFudXBQZW5kaW5nUGFpcmluZ3MoZT17fSl7dHJ5e3RoaXMubG9nZ2VyLmluZm8oXCJDbGVhbmluZyB1cCBpbmFjdGl2ZSBwYWlyaW5ncy4uLlwiKTtjb25zdCBzPXRoaXMuY2xpZW50LnBhaXJpbmcuZ2V0QWxsKCk7aWYoIVIocykpcmV0dXJuO2Zvcihjb25zdCBpIG9mIHMpZS5kZWxldGVQYWlyaW5ncz90aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuc2V0KGkudG9waWMsMCk6YXdhaXQgdGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnN1YnNjcmliZXIudW5zdWJzY3JpYmUoaS50b3BpYyk7dGhpcy5sb2dnZXIuaW5mbyhgSW5hY3RpdmUgcGFpcmluZ3MgY2xlYXJlZDogJHtzLmxlbmd0aH1gKX1jYXRjaChzKXt0aGlzLmxvZ2dlci53YXJuKHMsXCJGYWlsZWQgdG8gY2xlYW51cCBwZW5kaW5nIHBhaXJpbmdzXCIpfX1hYm9ydFBhaXJpbmdBdHRlbXB0KCl7dGhpcy5sb2dnZXIud2FybihcImFib3J0UGFpcmluZ0F0dGVtcHQgaXMgZGVwcmVjYXRlZC4gVGhpcyBpcyBub3cgYSBuby1vcC5cIil9YXN5bmMgY2hlY2tTdG9yYWdlKCl7dGhpcy5uYW1lc3BhY2VzPWF3YWl0IHRoaXMuZ2V0RnJvbVN0b3JlKFwibmFtZXNwYWNlc1wiKXx8e30sdGhpcy5vcHRpb25hbE5hbWVzcGFjZXM9YXdhaXQgdGhpcy5nZXRGcm9tU3RvcmUoXCJvcHRpb25hbE5hbWVzcGFjZXNcIil8fHt9LHRoaXMuc2Vzc2lvbiYmdGhpcy5jcmVhdGVQcm92aWRlcnMoKX1hc3luYyBpbml0aWFsaXplKCl7dGhpcy5sb2dnZXIudHJhY2UoXCJJbml0aWFsaXplZFwiKSxhd2FpdCB0aGlzLmNyZWF0ZUNsaWVudCgpLGF3YWl0IHRoaXMuY2hlY2tTdG9yYWdlKCksdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCl9YXN5bmMgY3JlYXRlQ2xpZW50KCl7dmFyIGUscztpZih0aGlzLmNsaWVudD10aGlzLnByb3ZpZGVyT3B0cy5jbGllbnR8fGF3YWl0IGplLmluaXQoe2NvcmU6dGhpcy5wcm92aWRlck9wdHMuY29yZSxsb2dnZXI6dGhpcy5wcm92aWRlck9wdHMubG9nZ2VyfHxjZSxyZWxheVVybDp0aGlzLnByb3ZpZGVyT3B0cy5yZWxheVVybHx8cHQscHJvamVjdElkOnRoaXMucHJvdmlkZXJPcHRzLnByb2plY3RJZCxtZXRhZGF0YTp0aGlzLnByb3ZpZGVyT3B0cy5tZXRhZGF0YSxzdG9yYWdlT3B0aW9uczp0aGlzLnByb3ZpZGVyT3B0cy5zdG9yYWdlT3B0aW9ucyxzdG9yYWdlOnRoaXMucHJvdmlkZXJPcHRzLnN0b3JhZ2UsbmFtZTp0aGlzLnByb3ZpZGVyT3B0cy5uYW1lLGN1c3RvbVN0b3JhZ2VQcmVmaXg6dGhpcy5wcm92aWRlck9wdHMuY3VzdG9tU3RvcmFnZVByZWZpeCx0ZWxlbWV0cnlFbmFibGVkOnRoaXMucHJvdmlkZXJPcHRzLnRlbGVtZXRyeUVuYWJsZWR9KSx0aGlzLnByb3ZpZGVyT3B0cy5zZXNzaW9uKXRyeXt0aGlzLnNlc3Npb249dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQodGhpcy5wcm92aWRlck9wdHMuc2Vzc2lvbi50b3BpYyl9Y2F0Y2goaSl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoaSxcIkZhaWxlZCB0byBnZXQgc2Vzc2lvblwiKSxuZXcgRXJyb3IoYFRoZSBwcm92aWRlZCBzZXNzaW9uOiAkeyhzPShlPXRoaXMucHJvdmlkZXJPcHRzKT09bnVsbD92b2lkIDA6ZS5zZXNzaW9uKT09bnVsbD92b2lkIDA6cy50b3BpY30gZG9lc24ndCBleGlzdCBpbiB0aGUgU2lnbiBjbGllbnRgKX1lbHNle2NvbnN0IGk9dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXRBbGwoKTt0aGlzLnNlc3Npb249aVswXX10aGlzLmxvZ2dlci50cmFjZShcIlNpZ25DbGllbnQgSW5pdGlhbGl6ZWRcIil9Y3JlYXRlUHJvdmlkZXJzKCl7aWYoIXRoaXMuY2xpZW50KXRocm93IG5ldyBFcnJvcihcIlNpZ24gQ2xpZW50IG5vdCBpbml0aWFsaXplZFwiKTtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gbm90IGluaXRpYWxpemVkLiBQbGVhc2UgY2FsbCBjb25uZWN0KCkgYmVmb3JlIGVuYWJsZSgpXCIpO2NvbnN0IGU9Wy4uLm5ldyBTZXQoT2JqZWN0LmtleXModGhpcy5zZXNzaW9uLm5hbWVzcGFjZXMpLm1hcChzPT5PKHMpKSldO1UoXCJjbGllbnRcIix0aGlzLmNsaWVudCksVShcImV2ZW50c1wiLHRoaXMuZXZlbnRzKSxVKFwiZGlzYWJsZVByb3ZpZGVyUGluZ1wiLHRoaXMuZGlzYWJsZVByb3ZpZGVyUGluZyksZS5mb3JFYWNoKHM9PntpZighdGhpcy5zZXNzaW9uKXJldHVybjtjb25zdCBpPWJ0KHMsdGhpcy5zZXNzaW9uKTtpZihpPy5sZW5ndGg9PT0wKXJldHVybjtjb25zdCByPWZlKGkpLGE9Qyh0aGlzLm5hbWVzcGFjZXMsdGhpcy5vcHRpb25hbE5hbWVzcGFjZXMpLG49aihTKHt9LGFbc10pLHthY2NvdW50czppLGNoYWluczpyfSk7c3dpdGNoKHMpe2Nhc2VcImVpcDE1NVwiOnRoaXMucnBjUHJvdmlkZXJzW3NdPW5ldyBYdCh7bmFtZXNwYWNlOm59KTticmVhaztkZWZhdWx0OnRoaXMucnBjUHJvdmlkZXJzW3NdPW5ldyBadCh7bmFtZXNwYWNlOm59KX19KX1yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCl7aWYodHlwZW9mIHRoaXMuY2xpZW50PlwidVwiKXRocm93IG5ldyBFcnJvcihcIlNpZ24gQ2xpZW50IGlzIG5vdCBpbml0aWFsaXplZFwiKTt0aGlzLmNsaWVudC5vbihcInNlc3Npb25fcGluZ1wiLGU9Pnt2YXIgcztjb25zdHt0b3BpYzppfT1lO2k9PT0oKHM9dGhpcy5zZXNzaW9uKT09bnVsbD92b2lkIDA6cy50b3BpYykmJnRoaXMuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3BpbmdcIixlKX0pLHRoaXMuY2xpZW50Lm9uKFwic2Vzc2lvbl9ldmVudFwiLGU9Pnt2YXIgcztjb25zdHtwYXJhbXM6aSx0b3BpYzpyfT1lO2lmKHIhPT0oKHM9dGhpcy5zZXNzaW9uKT09bnVsbD92b2lkIDA6cy50b3BpYykpcmV0dXJuO2NvbnN0e2V2ZW50OmF9PWk7aWYoYS5uYW1lPT09XCJhY2NvdW50c0NoYW5nZWRcIil7Y29uc3Qgbj1hLmRhdGE7biYmUihuKSYmdGhpcy5ldmVudHMuZW1pdChcImFjY291bnRzQ2hhbmdlZFwiLG4ubWFwKHllKSl9ZWxzZSBpZihhLm5hbWU9PT1cImNoYWluQ2hhbmdlZFwiKXtjb25zdCBuPWkuY2hhaW5JZCxjPWkuZXZlbnQuZGF0YSxvPU8obiksaD1IKG4pIT09SChjKT9gJHtvfToke0goYyl9YDpuO3RoaXMub25DaGFpbkNoYW5nZWQoe2N1cnJlbnRDYWlwQ2hhaW5JZDpofSl9ZWxzZSB0aGlzLmV2ZW50cy5lbWl0KGEubmFtZSxhLmRhdGEpO3RoaXMuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX2V2ZW50XCIsZSl9KSx0aGlzLmNsaWVudC5vbihcInNlc3Npb25fdXBkYXRlXCIsKHt0b3BpYzplLHBhcmFtczpzfSk9Pnt2YXIgaSxyO2lmKGUhPT0oKGk9dGhpcy5zZXNzaW9uKT09bnVsbD92b2lkIDA6aS50b3BpYykpcmV0dXJuO2NvbnN0e25hbWVzcGFjZXM6YX09cyxuPShyPXRoaXMuY2xpZW50KT09bnVsbD92b2lkIDA6ci5zZXNzaW9uLmdldChlKTt0aGlzLnNlc3Npb249aihTKHt9LG4pLHtuYW1lc3BhY2VzOmF9KSx0aGlzLm9uU2Vzc2lvblVwZGF0ZSgpLHRoaXMuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3VwZGF0ZVwiLHt0b3BpYzplLHBhcmFtczpzfSl9KSx0aGlzLmNsaWVudC5vbihcInNlc3Npb25fZGVsZXRlXCIsYXN5bmMgZT0+e3ZhciBzO2UudG9waWM9PT0oKHM9dGhpcy5zZXNzaW9uKT09bnVsbD92b2lkIDA6cy50b3BpYykmJihhd2FpdCB0aGlzLmNsZWFudXAoKSx0aGlzLmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9kZWxldGVcIixlKSx0aGlzLmV2ZW50cy5lbWl0KFwiZGlzY29ubmVjdFwiLGooUyh7fSxYKFwiVVNFUl9ESVNDT05ORUNURURcIikpLHtkYXRhOmUudG9waWN9KSkpfSksdGhpcy5vbihGLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxlPT57dGhpcy5vbkNoYWluQ2hhbmdlZChqKFMoe30sZSkse2ludGVybmFsOiEwfSkpfSl9Z2V0UHJvdmlkZXIoZSl7cmV0dXJuIHRoaXMucnBjUHJvdmlkZXJzW2VdfHx0aGlzLnJwY1Byb3ZpZGVyc1toZV19b25TZXNzaW9uVXBkYXRlKCl7T2JqZWN0LmtleXModGhpcy5ycGNQcm92aWRlcnMpLmZvckVhY2goZT0+e3ZhciBzO3RoaXMuZ2V0UHJvdmlkZXIoZSkudXBkYXRlTmFtZXNwYWNlKChzPXRoaXMuc2Vzc2lvbik9PW51bGw/dm9pZCAwOnMubmFtZXNwYWNlc1tlXSl9KX1zZXROYW1lc3BhY2VzKGUpe2NvbnN0e25hbWVzcGFjZXM6cz17fSxvcHRpb25hbE5hbWVzcGFjZXM6aT17fSxzZXNzaW9uUHJvcGVydGllczpyLHNjb3BlZFByb3BlcnRpZXM6YX09ZTt0aGlzLm9wdGlvbmFsTmFtZXNwYWNlcz1DKHMsaSksdGhpcy5zZXNzaW9uUHJvcGVydGllcz1yLHRoaXMuc2NvcGVkUHJvcGVydGllcz1hfXZhbGlkYXRlQ2hhaW4oZSl7Y29uc3RbcyxpXT1lPy5zcGxpdChcIjpcIil8fFtcIlwiLFwiXCJdO2lmKCF0aGlzLm5hbWVzcGFjZXN8fCFPYmplY3Qua2V5cyh0aGlzLm5hbWVzcGFjZXMpLmxlbmd0aClyZXR1cm5bcyxpXTtpZihzJiYhT2JqZWN0LmtleXModGhpcy5uYW1lc3BhY2VzfHx7fSkubWFwKG49Pk8obikpLmluY2x1ZGVzKHMpKXRocm93IG5ldyBFcnJvcihgTmFtZXNwYWNlICcke3N9JyBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIGNhbGwgY29ubmVjdCgpIGZpcnN0IHdpdGggbmFtZXNwYWNlIGNvbmZpZy5gKTtpZihzJiZpKXJldHVybltzLGldO2NvbnN0IHI9TyhPYmplY3Qua2V5cyh0aGlzLm5hbWVzcGFjZXMpWzBdKSxhPXRoaXMucnBjUHJvdmlkZXJzW3JdLmdldERlZmF1bHRDaGFpbigpO3JldHVybltyLGFdfWFzeW5jIHJlcXVlc3RBY2NvdW50cygpe2NvbnN0W2VdPXRoaXMudmFsaWRhdGVDaGFpbigpO3JldHVybiBhd2FpdCB0aGlzLmdldFByb3ZpZGVyKGUpLnJlcXVlc3RBY2NvdW50cygpfWFzeW5jIG9uQ2hhaW5DaGFuZ2VkKHtjdXJyZW50Q2FpcENoYWluSWQ6ZSxwcmV2aW91c0NhaXBDaGFpbklkOnMsaW50ZXJuYWw6aT0hMX0pe2lmKCF0aGlzLm5hbWVzcGFjZXMpcmV0dXJuO2NvbnN0W3IsYV09dGhpcy52YWxpZGF0ZUNoYWluKGUpO2EmJih0aGlzLnVwZGF0ZU5hbWVzcGFjZUNoYWluKHIsYSksaT8odGhpcy5ldmVudHMuZW1pdChcImNoYWluQ2hhbmdlZFwiLGEpLHRoaXMuZW1pdEFjY291bnRzQ2hhbmdlZE9uQ2hhaW5DaGFuZ2Uoe25hbWVzcGFjZTpyLGN1cnJlbnRDYWlwQ2hhaW5JZDplLHByZXZpb3VzQ2FpcENoYWluSWQ6c30pKTp0aGlzLmdldFByb3ZpZGVyKHIpLnNldERlZmF1bHRDaGFpbihhKSxhd2FpdCB0aGlzLnBlcnNpc3QoXCJuYW1lc3BhY2VzXCIsdGhpcy5uYW1lc3BhY2VzKSl9ZW1pdEFjY291bnRzQ2hhbmdlZE9uQ2hhaW5DaGFuZ2Uoe25hbWVzcGFjZTplLGN1cnJlbnRDYWlwQ2hhaW5JZDpzLHByZXZpb3VzQ2FpcENoYWluSWQ6aX0pe3ZhciByLGE7dHJ5e2lmKGk9PT1zKXJldHVybjtjb25zdCBuPShhPShyPXRoaXMuc2Vzc2lvbik9PW51bGw/dm9pZCAwOnIubmFtZXNwYWNlc1tlXSk9PW51bGw/dm9pZCAwOmEuYWNjb3VudHM7aWYoIW4pcmV0dXJuO2NvbnN0IGM9bi5maWx0ZXIobz0+by5pbmNsdWRlcyhgJHtzfTpgKSkubWFwKHllKTtpZighUihjKSlyZXR1cm47dGhpcy5ldmVudHMuZW1pdChcImFjY291bnRzQ2hhbmdlZFwiLGMpfWNhdGNoKG4pe3RoaXMubG9nZ2VyLndhcm4obixcIkZhaWxlZCB0byBlbWl0IGFjY291bnRzQ2hhbmdlZCBvbiBjaGFpbiBjaGFuZ2VcIil9fXVwZGF0ZU5hbWVzcGFjZUNoYWluKGUscyl7aWYoIXRoaXMubmFtZXNwYWNlcylyZXR1cm47Y29uc3QgaT10aGlzLm5hbWVzcGFjZXNbZV0/ZTpgJHtlfToke3N9YCxyPXtjaGFpbnM6W10sbWV0aG9kczpbXSxldmVudHM6W10sZGVmYXVsdENoYWluOnN9O3RoaXMubmFtZXNwYWNlc1tpXT90aGlzLm5hbWVzcGFjZXNbaV0mJih0aGlzLm5hbWVzcGFjZXNbaV0uZGVmYXVsdENoYWluPXMpOnRoaXMubmFtZXNwYWNlc1tpXT1yfW9uQ29ubmVjdCgpe3RoaXMuY3JlYXRlUHJvdmlkZXJzKCksdGhpcy5ldmVudHMuZW1pdChcImNvbm5lY3RcIix7c2Vzc2lvbjp0aGlzLnNlc3Npb259KX1hc3luYyBjbGVhbnVwKCl7dGhpcy5uYW1lc3BhY2VzPXZvaWQgMCx0aGlzLm9wdGlvbmFsTmFtZXNwYWNlcz12b2lkIDAsdGhpcy5zZXNzaW9uUHJvcGVydGllcz12b2lkIDAsYXdhaXQgdGhpcy5kZWxldGVGcm9tU3RvcmUoXCJuYW1lc3BhY2VzXCIpLGF3YWl0IHRoaXMuZGVsZXRlRnJvbVN0b3JlKFwib3B0aW9uYWxOYW1lc3BhY2VzXCIpLGF3YWl0IHRoaXMuZGVsZXRlRnJvbVN0b3JlKFwic2Vzc2lvblByb3BlcnRpZXNcIiksdGhpcy5zZXNzaW9uPXZvaWQgMCx0aGlzLmNsZWFudXBQZW5kaW5nUGFpcmluZ3Moe2RlbGV0ZVBhaXJpbmdzOiEwfSksYXdhaXQgdGhpcy5jbGVhbnVwU3RvcmFnZSgpfWFzeW5jIHBlcnNpc3QoZSxzKXt2YXIgaTtjb25zdCByPSgoaT10aGlzLnNlc3Npb24pPT1udWxsP3ZvaWQgMDppLnRvcGljKXx8XCJcIjthd2FpdCB0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2Uuc2V0SXRlbShgJHtBfS8ke2V9JHtyfWAscyl9YXN5bmMgZ2V0RnJvbVN0b3JlKGUpe3ZhciBzO2NvbnN0IGk9KChzPXRoaXMuc2Vzc2lvbik9PW51bGw/dm9pZCAwOnMudG9waWMpfHxcIlwiO3JldHVybiBhd2FpdCB0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2UuZ2V0SXRlbShgJHtBfS8ke2V9JHtpfWApfWFzeW5jIGRlbGV0ZUZyb21TdG9yZShlKXt2YXIgcztjb25zdCBpPSgocz10aGlzLnNlc3Npb24pPT1udWxsP3ZvaWQgMDpzLnRvcGljKXx8XCJcIjthd2FpdCB0aGlzLmNsaWVudC5jb3JlLnN0b3JhZ2UucmVtb3ZlSXRlbShgJHtBfS8ke2V9JHtpfWApfWFzeW5jIGNsZWFudXBTdG9yYWdlKCl7dmFyIGU7dHJ5e2lmKCgoZT10aGlzLmNsaWVudCk9PW51bGw/dm9pZCAwOmUuc2Vzc2lvbi5sZW5ndGgpPjApcmV0dXJuO2NvbnN0IHM9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5zdG9yYWdlLmdldEtleXMoKTtmb3IoY29uc3QgaSBvZiBzKWkuc3RhcnRzV2l0aChBKSYmYXdhaXQgdGhpcy5jbGllbnQuY29yZS5zdG9yYWdlLnJlbW92ZUl0ZW0oaSl9Y2F0Y2gocyl7dGhpcy5sb2dnZXIud2FybihzLFwiRmFpbGVkIHRvIGNsZWFudXAgc3RvcmFnZVwiKX19fWNvbnN0IG5zPU47ZXhwb3J0e25zIGFzIFVuaXZlcnNhbFByb3ZpZGVyLE4gYXMgZGVmYXVsdH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@walletconnect+universal-provider@2.22.4_@react-native-async-storage+async-storage@2.2._5dd727ea2623fa355027986e37232b45/node_modules/@walletconnect/universal-provider/dist/index.js\n");

/***/ })

};
;